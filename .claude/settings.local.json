{
  "permissions": {
    "allow": [
      "Bash(git rm:*)",
      "Bash(xargs grep:*)",
      "Bash(cat:*)",
      "Bash(git add:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nfix(samples): Remove duplicate tax line items in ShopWorks OnSite\n\nProblem: Orders were showing duplicate Tax_10.1 line items in OnSite\ninvoices because tax was being sent in TWO places:\n1. As a line item in LinesOE array\n2. As Payment block fields (TaxTotal, TaxPartNumber, TaxPartDescription)\n\nShopWorks OnSite creates a tax line from EACH source, causing duplicates.\n\nSolution: Use Payment block approach only (recommended pattern)\n- Removed tax line item code from sample-order-service.js\n- Tax now sent only via Payment block fields\n- Added TaxPartNumber and TaxPartDescription to order object\n- ShopWorks auto-creates single tax line from Payment block\n\nFiles Changed:\n- shared_components/js/sample-order-service.js\n  * Removed lines 206-223 (tax line item push to LinesOE)\n  * Added taxPartNumber and taxPartDescription fields (lines 250-251)\n  * Updated comments to document Payment block approach\n- memory/manageorders-push/TROUBLESHOOTING.md\n  * Added \"Duplicate sales tax line items\" troubleshooting section\n  * Documented root cause and solution with code examples\n  * Added fix tracking notes\n\nTesting: Verified with order NWCA-SAMPLE-1031-2-335\n- Only ONE Tax_10.1 line item appears in ShopWorks\n- Total calculated correctly\n- Tax amount matches expected 10.1% calculation\n\nReference: memory/manageorders-push/PAYMENT_SHIPPING_FIELDS.md#payment-subblock\nEOF\n)\")",
      "Bash(git commit -m \"$(cat <<''EOF''\nfix(manageorders): Add TaxPartNumber and TaxPartDescription field mapping\n\nProblem: Browser was sending taxPartNumber and taxPartDescription fields,\nbut the proxy transformation was silently dropping them. OnSite had to\nauto-generate these fields during hourly import instead of receiving\nthem explicitly from the API.\n\nSolution: Add tax field mapping to match existing discount field pattern\n- Added TaxPartNumber mapping (from orderData.taxPartNumber)\n- Added TaxPartDescription mapping (from orderData.taxPartDescription)\n- Grouped with TaxTotal in conditional inclusion block\n- Only sent when taxTotal > 0 (prevents empty tax fields)\n- Provides empty string defaults if fields not provided\n\nImplementation:\n- Modified lib/manageorders-push-client.js lines 104-114\n- Changed single TaxTotal field to object with three fields:\n  * TaxTotal (amount)\n  * TaxPartNumber (part number for tax line item)\n  * TaxPartDescription (description for tax line item)\n- Follows same pattern as DiscountPartNumber/DiscountPartDescription\n\nBenefits:\n- Complete Payment block tax field implementation\n- Explicit tax configuration instead of OnSite defaults\n- Matches ShopWorks recommended approach for tax handling\n- Prevents duplicate tax line items when used with browser fix\n\nRelated: Pricing Index File 2025 commit 518f5a7 (removed tax from LinesOE)\n\nTesting:\n- Deploy to Heroku\n- Submit sample order with tax\n- Verify ManageOrders data includes all three tax fields\n- Verify OnSite invoice shows correct tax configuration\nEOF\n)\")",
      "Bash(grep:*)",
      "Bash(.*Size0|Size01.*S|map.*size.*Size0)",
      "Bash('/c/Users/erik/OneDrive - Northwest Custom Apparel/2025/caspio-pricing-proxy' --include=*.js --include=*.md)"
    ],
    "deny": [],
    "ask": [],
    "defaultMode": "acceptEdits",
    "additionalDirectories": [
      "/home/erik/.claude"
    ]
  }
}
