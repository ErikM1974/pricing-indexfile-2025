/**
 * Mobile Collapsible Content Fix
 * Ensures all content is visible within collapsible sections
 */

@media (max-width: 768px) {
    /* Fix content visibility in collapsible sections */
    .simple-collapsible-content * {
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
    }
    
    /* Preserve flex and grid layouts */
    .simple-collapsible-content .card-grid,
    .simple-collapsible-content .form-grid,
    .simple-collapsible-content .color-grid {
        display: grid !important;
    }
    
    .simple-collapsible-content .card-content {
        display: block !important;
    }
    
    /* Fix images */
    .simple-collapsible-content img {
        display: inline-block !important;
        max-width: 100% !important;
        height: auto !important;
    }
    
    /* Fix image gallery */
    .simple-collapsible-content .image-gallery-enhanced {
        display: block !important;
    }
    
    .simple-collapsible-content .image-container-enhanced {
        display: block !important;
        position: relative !important;
    }
    
    .simple-collapsible-content .product-main-image {
        display: block !important;
        width: 100% !important;
        height: auto !important;
    }
    
    /* Fix color swatches */
    .simple-collapsible-content .color-swatches,
    .simple-collapsible-content #color-swatches {
        display: grid !important;
        grid-template-columns: repeat(auto-fill, minmax(50px, 1fr)) !important;
        gap: 10px !important;
    }
    
    .simple-collapsible-content .color-swatch {
        display: block !important;
        width: 50px !important;
        height: 50px !important;
    }
    
    /* Fix pricing table */
    .simple-collapsible-content .pricing-table-container {
        display: block !important;
        overflow-x: auto !important;
    }
    
    .simple-collapsible-content .pricing-table {
        display: table !important;
        width: 100% !important;
    }
    
    .simple-collapsible-content table,
    .simple-collapsible-content thead,
    .simple-collapsible-content tbody,
    .simple-collapsible-content tr,
    .simple-collapsible-content th,
    .simple-collapsible-content td {
        display: revert !important;
    }
    
    /* Fix form elements */
    .simple-collapsible-content input,
    .simple-collapsible-content select,
    .simple-collapsible-content button,
    .simple-collapsible-content label {
        display: revert !important;
    }
    
    /* Fix hidden elements that should stay hidden */
    .simple-collapsible-content .hidden,
    .simple-collapsible-content [aria-hidden="true"]:not(.collapsible-content),
    .simple-collapsible-content .loading-spinner:not(.active),
    .simple-collapsible-content .error-message:empty {
        display: none !important;
    }
    
    /* Ensure proper spacing */
    .simple-collapsible-content > .content-card > .card-content > * {
        margin-bottom: 15px;
    }
    
    /* Fix specific sections */
    
    /* Product Info Section */
    .simple-collapsible-content .product-details-section {
        display: block !important;
    }
    
    .simple-collapsible-content .info-panel {
        display: block !important;
        padding: 15px !important;
        background: #f8f9fa !important;
        border-radius: 8px !important;
        margin-bottom: 15px !important;
    }
    
    /* Color selection */
    .simple-collapsible-content .color-selection-container {
        display: flex !important;
        align-items: center !important;
        gap: 15px !important;
        margin-bottom: 15px !important;
    }
    
    .simple-collapsible-content .selected-color-swatch {
        display: block !important;
        width: 60px !important;
        height: 60px !important;
        border-radius: 8px !important;
    }
    
    /* Customization Section */
    .simple-collapsible-content .form-section {
        display: block !important;
        margin-bottom: 20px !important;
    }
    
    .simple-collapsible-content .stitch-count-select,
    .simple-collapsible-content .back-logo-checkbox {
        display: inline-block !important;
    }
    
    .simple-collapsible-content .back-logo-details {
        display: block !important;
    }
    
    .simple-collapsible-content .stitch-counter {
        display: flex !important;
        align-items: center !important;
        gap: 10px !important;
    }
    
    /* Quote Builder Section */
    .simple-collapsible-content #add-to-cart-section {
        display: block !important;
    }
    
    /* Override any display:none from other scripts */
    .simple-collapsible-active .simple-open .simple-collapsible-content > * {
        display: block !important;
    }
    
    /* Debug - add borders to see elements */
    .debug-borders .simple-collapsible-content * {
        border: 1px solid red !important;
    }
}