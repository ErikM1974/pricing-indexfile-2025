<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Northwest Custom Apparel DTG Pricing - Get instant quotes for direct-to-garment printing">
    <title>DTG Pricing | Northwest Custom Apparel</title>
    
    <!-- Preload critical resources -->
    <link rel="preload" href="/shared_components/css/shared-pricing-styles.css" as="style">
    <link rel="preload" href="/shared_components/js/dtg-adapter.js" as="script">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="/shared_components/css/shared-pricing-styles.css">
    
    <!-- Critical inline styles for above-the-fold content -->
    <style>
        /* CSS Variables - Company Colors */
        :root {
            --primary-color: #2e5827; /* Northwest Custom Apparel Green */
            --primary-dark: #1e3a1a;
            --primary-light: #e8f5e8;
            --primary-extralight: #f5faf5;
            
            --secondary-color: #000000; /* Black */
            --tertiary-color: #808080; /* Grey */
            
            --white: #ffffff;
            --background-light: #f8f9fa;
            --background-ultralight: #fdfdfd;
            --border-color: #dee2e6;
            --border-light: #e9ecef;
            --border-extralight: #f0f0f0;
            --text-color: #212529;
            --text-muted: #6c757d;
            
            --shadow-xs: 0 1px 2px rgba(0,0,0,0.05);
            --shadow-sm: 0 2px 4px rgba(0,0,0,0.1);
            --shadow-md: 0 4px 6px rgba(0,0,0,0.1);
            
            --radius-sm: 4px;
            --radius-md: 8px;
            
            --spacing-sm: 0.5rem;
            --spacing-md: 1rem;
            
            --info-color: #17a2b8;
            --info-light: #e8f4ff;
            --info-dark: #004085;
        }
        
        /* Optimized layout styles */
        .product-page-columns-container {
            display: flex;
            gap: 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .product-context-column {
            flex: 0 0 380px;
            position: sticky;
            top: 20px;
            height: fit-content;
        }
        
        .product-interactive-column {
            flex: 1;
            min-width: 0;
        }
        
        /* Product header */
        .product-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.25rem;
            background-color: var(--background-light);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            margin-bottom: 1rem;
        }
        
        .product-title-area h2 {
            margin: 0;
            color: var(--primary-color);
            font-size: 1.5rem;
        }
        
        .product-meta {
            margin-top: 0.5rem;
            color: var(--text-muted);
            font-size: 0.9rem;
        }
        
        .back-to-product {
            color: var(--primary-color);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: opacity 0.2s;
        }
        
        .back-to-product:hover {
            opacity: 0.8;
        }
        
        /* Image gallery */
        .product-image-gallery {
            background: white;
            border-radius: var(--radius-md);
            padding: 1rem;
            box-shadow: var(--shadow-sm);
            margin-bottom: 1rem;
        }
        
        .main-image-container {
            position: relative;
            background: var(--background-light);
            border-radius: var(--radius-sm);
            overflow: hidden;
            margin-bottom: 1rem;
        }
        
        .main-image-container img {
            width: 100%;
            height: auto;
            display: block;
            min-height: 300px;
            object-fit: contain;
        }
        
        .image-thumbnails {
            display: flex;
            gap: 0.5rem;
            overflow-x: auto;
            padding: 0.5rem 0;
        }
        
        .thumbnail-item {
            flex: 0 0 60px;
            height: 60px;
            border: 2px solid transparent;
            border-radius: var(--radius-sm);
            overflow: hidden;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .thumbnail-item:hover {
            border-color: var(--primary-light);
        }
        
        .thumbnail-item.active {
            border-color: var(--primary-color);
        }
        
        .thumbnail-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        /* Color swatches */
        .color-swatches-container {
            background: white;
            border-radius: var(--radius-md);
            padding: 1rem;
            box-shadow: var(--shadow-sm);
        }
        
        .color-swatches-container h3 {
            margin: 0 0 1rem 0;
            color: var(--primary-color);
            font-size: 1.1rem;
        }
        
        .color-swatches {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(50px, 1fr));
            gap: 0.75rem;
            max-height: 250px;
            overflow-y: auto;
            padding: 0.5rem;
        }
        
        .swatch-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
        }
        
        .color-swatch {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid var(--border-color);
            margin-bottom: 0.25rem;
            transition: all 0.2s;
        }
        
        .color-swatch:hover {
            border-color: var(--primary-color);
            transform: scale(1.1);
        }
        
        .color-swatch.active {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px var(--primary-light);
        }
        
        .color-name {
            font-size: 0.7rem;
            text-align: center;
            color: var(--text-muted);
        }
        
        /* Pricing section */
        .pricing-section {
            background: white;
            border-radius: var(--radius-md);
            padding: 1.5rem;
            box-shadow: var(--shadow-sm);
            margin-bottom: 1.5rem;
        }
        
        .pricing-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .pricing-header h3 {
            margin: 0;
            color: var(--primary-color);
            font-size: 1.3rem;
        }
        
        .selected-color-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--primary-light);
            padding: 0.5rem 1rem;
            border-radius: var(--radius-sm);
            border-left: 3px solid var(--primary-color);
        }
        
        .mini-color-swatch {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 2px solid var(--border-color);
        }
        
        /* Pricing grid */
        .pricing-grid {
            width: 100%;
            border-collapse: collapse;
            border-radius: var(--radius-sm);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
        }
        
        .pricing-grid th {
            background: var(--primary-color);
            color: white;
            padding: 0.75rem;
            text-align: center;
            font-weight: 600;
        }
        
        .pricing-grid th:first-child {
            text-align: left;
            padding-left: 1rem;
        }
        
        .pricing-grid td {
            padding: 0.75rem;
            text-align: center;
            border-bottom: 1px solid var(--border-light);
        }
        
        .pricing-grid td:first-child {
            text-align: left;
            padding-left: 1rem;
            font-weight: 500;
        }
        
        .pricing-grid tbody tr:nth-child(even) {
            background: var(--background-ultralight);
        }
        
        .pricing-grid tbody tr:hover {
            background: var(--primary-extralight);
        }
        
        .pricing-grid tbody tr.current-pricing-level-highlight {
            background: var(--primary-light) !important;
            font-weight: 600;
        }
        
        /* Location selector */
        .location-selector-container {
            background: var(--background-light);
            border-radius: var(--radius-md);
            padding: 1rem;
            margin-bottom: 1.5rem;
            text-align: center;
        }
        
        .location-selector-container label {
            font-weight: 600;
            margin-right: 0.5rem;
        }
        
        .location-selector-container select {
            padding: 0.5rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-sm);
            font-size: 0.9rem;
            min-width: 200px;
            background: white;
        }
        
        /* Add to cart section */
        .add-to-cart-section {
            background: white;
            border-radius: var(--radius-md);
            padding: 1.5rem;
            box-shadow: var(--shadow-sm);
        }
        
        .add-to-cart-section h3 {
            margin: 0 0 1.5rem 0;
            color: var(--primary-color);
            font-size: 1.3rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-light);
        }
        
        /* Quantity matrix */
        .quantity-matrix {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1.5rem;
        }
        
        .quantity-matrix th,
        .quantity-matrix td {
            padding: 0.75rem;
            text-align: center;
            border: 1px solid var(--border-light);
        }
        
        .quantity-matrix th {
            background: var(--primary-light);
            color: var(--primary-color);
            font-weight: 600;
        }
        
        .quantity-matrix th:first-child {
            text-align: left;
        }
        
        .quantity-input-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.25rem;
        }
        
        .quantity-btn {
            width: 24px;
            height: 24px;
            border: 1px solid var(--primary-color);
            background: white;
            color: var(--primary-color);
            cursor: pointer;
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }
        
        .quantity-btn:hover {
            background: var(--primary-color);
            color: white;
        }
        
        .quantity-input {
            width: 50px;
            text-align: center;
            padding: 0.25rem;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-sm);
        }
        
        /* Cart summary */
        .cart-summary {
            background: var(--primary-light);
            border-radius: var(--radius-md);
            padding: 1.5rem;
            border-left: 4px solid var(--primary-color);
            position: sticky;
            bottom: 20px;
        }
        
        .cart-total {
            display: flex;
            justify-content: space-between;
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--primary-dark);
        }
        
        .add-to-cart-button {
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: var(--radius-sm);
            padding: 1rem;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: all 0.2s;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .add-to-cart-button:hover {
            background: var(--primary-dark);
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .add-to-cart-button:disabled {
            background: var(--tertiary-color);
            cursor: not-allowed;
            transform: none;
        }
        
        /* Loading states */
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid var(--primary-light);
            border-top-color: var(--primary-color);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Responsive design */
        @media (max-width: 1024px) {
            .product-page-columns-container {
                flex-direction: column;
            }
            
            .product-context-column {
                flex: 1;
                position: static;
                max-width: 100%;
            }
        }
        
        @media (max-width: 768px) {
            .product-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
            
            .pricing-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .pricing-grid {
                font-size: 0.9rem;
            }
            
            .pricing-grid th,
            .pricing-grid td {
                padding: 0.5rem;
            }
            
            .quantity-matrix {
                font-size: 0.9rem;
            }
        }
        
        @media (max-width: 480px) {
            .color-swatches {
                grid-template-columns: repeat(auto-fill, minmax(40px, 1fr));
                max-height: 180px;
            }
            
            .color-swatch {
                width: 35px;
                height: 35px;
            }
            
            .pricing-grid {
                font-size: 0.8rem;
            }
            
            .location-selector-container select {
                width: 100%;
            }
        }
        
        /* Hidden elements */
        .hidden {
            display: none !important;
        }
        
        /* Error states */
        .error-message {
            background: #fdd;
            color: #721c24;
            border: 1px solid #f5c6cb;
            padding: 1rem;
            border-radius: var(--radius-sm);
            margin-bottom: 1rem;
        }
        
        /* LTM notice */
        .ltm-fee-notice {
            background: var(--info-light);
            color: var(--info-dark);
            padding: 1rem;
            border-radius: var(--radius-sm);
            margin-bottom: 1rem;
            border-left: 3px solid var(--info-color);
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
        }
        
        .ltm-icon {
            font-size: 1.2rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>DTG Pricing</h1>
        
        <div class="product-page-columns-container">
            <!-- Left Column: Product Context -->
            <div class="product-context-column">
                <div class="product-header">
                    <div class="product-title-area">
                        <h2 id="product-title">Product Title</h2>
                        <div class="product-meta">
                            <span>Style: <strong id="product-style">Style Number</strong></span>
                        </div>
                    </div>
                    <div class="navigation-area">
                        <a id="back-to-product" href="#" class="back-to-product">
                            <span>←</span> Back to Product
                        </a>
                    </div>
                </div>
                
                <!-- Product Image Gallery -->
                <div class="product-image-gallery">
                    <div class="main-image-container">
                        <img id="product-image-main" src="" alt="Product Image">
                    </div>
                    <div class="image-thumbnails" id="image-thumbnails">
                        <!-- Thumbnails will be dynamically added -->
                    </div>
                </div>
                
                <!-- Product Info -->
                <div class="static-product-info" style="background: white; border-radius: var(--radius-md); padding: 1rem; box-shadow: var(--shadow-sm); margin-bottom: 1rem;">
                    <p style="margin: 0; color: var(--text-muted);">
                        Pricing includes a full-color DTG print on one location.
                    </p>
                </div>
                
                <!-- Color Swatches -->
                <div class="color-swatches-container">
                    <h3>Available Colors</h3>
                    <div class="color-swatches" id="color-swatches">
                        <!-- Color swatches will be dynamically added -->
                    </div>
                </div>
            </div>
            
            <!-- Right Column: Interactive Elements -->
            <div class="product-interactive-column">
                <!-- Hidden Caspio Container -->
                <div id="pricing-calculator" class="hidden">
                    <!-- Caspio datapage will be loaded here -->
                    <div class="loading-message">Loading pricing data...</div>
                </div>
                
                <!-- Location Selector -->
                <div class="location-selector-container">
                    <label for="parent-dtg-location-select">Select Print Location:</label>
                    <select id="parent-dtg-location-select">
                        <option value="">-- Select Location --</option>
                        <option value="LC">Left Chest Only</option>
                        <option value="FF">Full Front Only</option>
                        <option value="FB">Full Back Only</option>
                        <option value="JF">Jumbo Front Only</option>
                        <option value="JB">Jumbo Back Only</option>
                        <option value="LC_FB">Left Chest + Full Back</option>
                        <option value="FF_FB">Full Front + Full Back</option>
                        <option value="JF_JB">Jumbo Front + Jumbo Back</option>
                    </select>
                </div>
                
                <!-- Pricing Section -->
                <div class="pricing-section">
                    <div class="pricing-header">
                        <h3>Pricing per Quantity Tier</h3>
                        <div class="selected-color-indicator">
                            <span>Selected Color:</span>
                            <div class="mini-color-swatch" id="pricing-color-swatch"></div>
                            <strong id="pricing-color-name">Color Name</strong>
                        </div>
                    </div>
                    
                    <div class="pricing-grid-container">
                        <table class="pricing-grid" id="custom-pricing-grid">
                            <thead>
                                <tr id="pricing-header-row">
                                    <th>Quantity</th>
                                    <!-- Size headers will be dynamically populated -->
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Pricing data will be dynamically added -->
                            </tbody>
                        </table>
                        
                        <div style="margin-top: 1rem; font-size: 0.9rem; color: var(--text-muted);">
                            <p style="margin: 0;">Prices shown are per item and include DTG printing.</p>
                        </div>
                    </div>
                </div>
                
                <!-- Add to Cart Section -->
                <div class="add-to-cart-section">
                    <h3>Add to Cart</h3>
                    
                    <div id="caspio-dtg-error-message" class="error-message hidden"></div>
                    
                    <div id="quantity-matrix">
                        <!-- Will be populated by JavaScript -->
                    </div>
                    
                    <div class="cart-summary">
                        <div class="cart-total">
                            <div>
                                <span>Total Quantity:</span>
                                <span class="total-quantity">0</span>
                            </div>
                            <div>
                                <span>Est. Total:</span>
                                <span class="total-amount">$0.00</span>
                            </div>
                        </div>
                        
                        <div class="ltm-fee-notice hidden">
                            <span class="ltm-icon">ℹ️</span>
                            <span>Less Than Minimum fee applies</span>
                        </div>
                        
                        <button id="add-to-cart-button" class="add-to-cart-button" disabled>
                            Add to Cart
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Scripts - Bundled and optimized loading -->
    <script>
        // Critical inline JavaScript for immediate functionality
        window.appConfig = {
            apiBaseUrl: 'https://caspio-pricing-proxy-ab30a049961a.herokuapp.com/api',
            primaryColor: '#2e5827',
            embellishmentType: 'dtg'
        };
    </script>
    
    <!-- Load scripts in optimized order -->
    <script src="/shared_components/js/utils.js"></script>
    <script src="/shared_components/js/pricing-pages.js"></script>
    <script src="/shared_components/js/pricing-matrix-api.js"></script>
    <script src="/shared_components/js/dp5-helper.js"></script>
    <script src="/shared_components/js/product-quantity-ui.js"></script>
    <script src="/shared_components/js/cart.js"></script>
    <script src="/shared_components/js/cart-integration.js"></script>
    <script src="/shared_components/js/cart-price-recalculator.js"></script>
    <script src="/shared_components/js/add-to-cart.js"></script>
    <script src="/shared_components/js/pricing-calculator.js"></script>
    <script src="/shared_components/js/dtg-adapter.js"></script>
    <script src="/shared_components/js/product-pricing-ui.js"></script>
    
    <!-- PDF generation (loaded last as it's not critical) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js" defer></script>
    <script src="/shared_components/js/order-form-pdf.js" defer></script>
    
    <!-- Quote functionality (if needed) -->
    <script src="/shared_components/js/dtg-quote.js" defer></script>
</body>
</html>