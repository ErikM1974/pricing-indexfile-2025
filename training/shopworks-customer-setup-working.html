<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopworks Customer Setup Training</title>
    <link rel="icon" href="https://cdn.caspio.com/A0E15000/Safety%20Stripes/NWCA%20Favicon%20for%20TEAMNWCA.com.png?ver=1" type="image/png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .game-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            width: 100%;
            max-width: 1200px;
            padding: 30px;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: #333;
            font-size: 2.5em;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .header img {
            height: 60px;
            width: auto;
        }

        .header p {
            color: #666;
            font-size: 1.1em;
        }

        .score-bar {
            background: #f0f0f0;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 25px;
            display: flex;
            justify-content: space-around;
            align-items: center;
        }

        .score-item {
            text-align: center;
        }

        .score-label {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 5px;
        }

        .score-value {
            font-size: 1.8em;
            font-weight: bold;
            color: #4CAF50;
        }

        .game-modes {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .mode-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 15px;
            padding: 20px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .mode-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .mode-card.active {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            transform: scale(1.05);
        }

        .mode-card h3 {
            font-size: 1.3em;
            margin-bottom: 10px;
        }

        .mode-card p {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .game-area {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            min-height: 400px;
            display: none;
        }

        .game-area.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .question-container {
            margin-bottom: 25px;
        }

        .question {
            font-size: 1.2em;
            color: #333;
            margin-bottom: 20px;
            padding: 20px;
            background: white;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .input-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-field {
            display: flex;
            flex-direction: column;
        }

        .form-field label {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .form-field input,
        .form-field select {
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            transition: all 0.3s;
        }

        .form-field input:focus,
        .form-field select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-field input.correct,
        .form-field select.correct {
            border-color: #4CAF50;
            background: #e8f5e9;
        }

        .form-field input.incorrect,
        .form-field select.incorrect {
            border-color: #f44336;
            background: #ffebee;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }

        .option-btn {
            padding: 12px;
            border: 2px solid #e0e0e0;
            background: white;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1em;
        }

        .option-btn:hover {
            border-color: #667eea;
            background: #f5f7ff;
        }

        .option-btn.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .option-btn.correct {
            background: #4CAF50;
            color: white;
            border-color: #4CAF50;
        }

        .option-btn.incorrect {
            background: #f44336;
            color: white;
            border-color: #f44336;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 25px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a67d8;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: #e0e0e0;
            color: #333;
        }

        .btn-secondary:hover {
            background: #d0d0d0;
        }

        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            font-weight: 600;
            display: none;
        }

        .feedback.correct {
            background: #e8f5e9;
            color: #2e7d32;
            border: 2px solid #4CAF50;
        }

        .feedback.incorrect {
            background: #ffebee;
            color: #c62828;
            border: 2px solid #f44336;
        }

        .feedback.show {
            display: block;
            animation: slideIn 0.3s ease;
        }

        .timer-bar {
            background: #e0e0e0;
            height: 8px;
            border-radius: 4px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .timer-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #45a049);
            transition: width 1s linear;
        }

        .hint-box {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            display: none;
        }

        .hint-box.show {
            display: block;
        }

        .hint-box h4 {
            color: #856404;
            margin-bottom: 10px;
        }

        .hint-box p {
            color: #856404;
        }

        .shopworks-form {
            background: white;
            border: 2px solid #d0d0d0;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .shopworks-header {
            background: #f0f0f0;
            margin: -20px -20px 20px -20px;
            padding: 15px 20px;
            border-bottom: 2px solid #d0d0d0;
            border-radius: 8px 8px 0 0;
        }

        .shopworks-header h3 {
            color: #333;
            font-size: 1.2em;
        }

        .progress-indicator {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .progress-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #e0e0e0;
            transition: all 0.3s;
        }

        .progress-dot.active {
            background: #667eea;
            transform: scale(1.3);
        }

        .progress-dot.completed {
            background: #4CAF50;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1>
                <img src="https://cdn.caspio.com/A0E15000/Safety%20Stripes/web%20northwest%20custom%20apparel%20logo.png?ver=1" alt="NWCA Logo">
                Shopworks Customer Setup Training
            </h1>
            <p>Master the art of customer setup in Shopworks CRM</p>
        </div>

        <div class="score-bar">
            <div class="score-item">
                <div class="score-label">Current Score</div>
                <div class="score-value" id="currentScore">0</div>
            </div>
            <div class="score-item">
                <div class="score-label">Streak</div>
                <div class="score-value" id="streak">0</div>
            </div>
            <div class="score-item">
                <div class="score-label">Best Score</div>
                <div class="score-value" id="bestScore">0</div>
            </div>
            <div class="score-item">
                <div class="score-label">Level</div>
                <div class="score-value" id="level">1</div>
            </div>
        </div>

        <div class="game-modes">
            <div class="mode-card" onclick="startMode('explorer')">
                <h3>🔍 Field Explorer</h3>
                <p>Learn about each field and its purpose in customer setup</p>
            </div>
            <div class="mode-card" onclick="startMode('simulator')">
                <h3>💼 Setup Simulator</h3>
                <p>Practice setting up real customer scenarios</p>
            </div>
            <div class="mode-card" onclick="startMode('detective')">
                <h3>🕵️ Field Detective</h3>
                <p>Identify and fix errors in customer records</p>
            </div>
            <div class="mode-card" onclick="startMode('speed')">
                <h3>⚡ Speed Challenge</h3>
                <p>Test your knowledge against the clock</p>
            </div>
        </div>

        <div class="game-area" id="gameArea">
            <!-- Game content will be dynamically inserted here -->
        </div>
    </div>

    <script>
        // Game state
        let currentMode = null;
        let currentScore = 0;
        let currentStreak = 0;
        let bestScore = localStorage.getItem('shopworksBestScore') || 0;
        let currentLevel = 1;
        let currentQuestion = 0;
        let timer = null;

        // Update score display
        document.getElementById('bestScore').textContent = bestScore;

        // Field definitions with business rules
        const fieldDefinitions = {
            taxCode: {
                label: 'Tax Code',
                rules: {
                    '2200': 'Business in Vancouver (CAN)',
                    '2202': 'Business outside Vancouver (CAN)',
                    '2203': 'Business in USA'
                },
                hint: 'Based on business location, not ship-to address'
            },
            salesperson: {
                label: 'Salesperson',
                options: ['Ruth', 'Taylar', 'Nika', 'Adriyella', 'Erik', 'Jim', 'Steve'],
                hint: 'Assign based on account ownership or territory'
            },
            customerType: {
                label: 'Customer Type',
                options: ['Construction', 'Medical', 'School', 'Corporate', 'Restaurant', 'Retail', 'Non-Profit'],
                hint: 'Primary industry or business sector'
            },
            creditTerms: {
                label: 'Credit Terms',
                options: ['Net 30', 'Net 15', 'Due on Receipt', 'Credit Card', '2/10 Net 30'],
                hint: 'Payment terms based on credit approval'
            }
        };

        // Sample scenarios for practice
        const scenarios = [
            {
                company: 'BlackStone Construction',
                location: 'Seattle, WA',
                industry: 'Construction',
                correct: {
                    taxCode: '2203',
                    customerType: 'Construction',
                    salesperson: 'Taylar'
                }
            },
            {
                company: 'Vancouver General Hospital',
                location: 'Vancouver, BC',
                industry: 'Healthcare',
                correct: {
                    taxCode: '2200',
                    customerType: 'Medical',
                    salesperson: 'Ruth'
                }
            },
            {
                company: 'Surrey School District',
                location: 'Surrey, BC',
                industry: 'Education',
                correct: {
                    taxCode: '2202',
                    customerType: 'School',
                    salesperson: 'Nika'
                }
            }
        ];

        function startMode(mode) {
            currentMode = mode;
            currentQuestion = 0;
            
            // Update UI
            document.querySelectorAll('.mode-card').forEach(card => {
                card.classList.remove('active');
            });
            event.target.closest('.mode-card').classList.add('active');
            
            const gameArea = document.getElementById('gameArea');
            gameArea.classList.add('active');
            
            // Start the selected mode
            switch(mode) {
                case 'explorer':
                    startFieldExplorer();
                    break;
                case 'simulator':
                    startSetupSimulator();
                    break;
                case 'detective':
                    startFieldDetective();
                    break;
                case 'speed':
                    startSpeedChallenge();
                    break;
            }
        }

        function startFieldExplorer() {
            const gameArea = document.getElementById('gameArea');
            gameArea.innerHTML = `
                <h2>🔍 Field Explorer Mode</h2>
                <p>Learn about each field used in Shopworks customer setup.</p>
                
                <div class="question-container">
                    <div class="question">
                        What tax code should be used for a business located in Seattle, Washington?
                    </div>
                    
                    <div class="options-grid">
                        <button class="option-btn" onclick="checkAnswer('2200', '2203')">2200 - Vancouver</button>
                        <button class="option-btn" onclick="checkAnswer('2202', '2203')">2202 - Outside Vancouver</button>
                        <button class="option-btn" onclick="checkAnswer('2203', '2203')">2203 - USA</button>
                    </div>
                    
                    <div class="hint-box" id="hintBox">
                        <h4>💡 Hint</h4>
                        <p>Remember: Tax codes are based on the business location, not shipping address. USA businesses always use 2203.</p>
                    </div>
                </div>
                
                <div class="feedback" id="feedback"></div>
                
                <div class="action-buttons">
                    <button class="btn btn-secondary" onclick="showHint()">Show Hint</button>
                    <button class="btn btn-primary" onclick="nextQuestion()">Next Question</button>
                </div>
            `;
        }

        function startSetupSimulator() {
            const scenario = scenarios[currentQuestion % scenarios.length];
            const gameArea = document.getElementById('gameArea');
            
            gameArea.innerHTML = `
                <h2>💼 Setup Simulator</h2>
                <div class="progress-indicator">
                    ${scenarios.map((_, i) => `<div class="progress-dot ${i === currentQuestion ? 'active' : ''} ${i < currentQuestion ? 'completed' : ''}"></div>`).join('')}
                </div>
                
                <div class="shopworks-form">
                    <div class="shopworks-header">
                        <h3>New Customer Setup: ${scenario.company}</h3>
                    </div>
                    
                    <div class="question">
                        <strong>Company:</strong> ${scenario.company}<br>
                        <strong>Location:</strong> ${scenario.location}<br>
                        <strong>Industry:</strong> ${scenario.industry}
                    </div>
                    
                    <div class="input-group">
                        <div class="form-field">
                            <label>Tax Code *</label>
                            <select id="taxCode" onchange="validateField('taxCode', '${scenario.correct.taxCode}')">
                                <option value="">Select...</option>
                                <option value="2200">2200 - Vancouver</option>
                                <option value="2202">2202 - Outside Vancouver</option>
                                <option value="2203">2203 - USA</option>
                            </select>
                        </div>
                        
                        <div class="form-field">
                            <label>Customer Type *</label>
                            <select id="customerType" onchange="validateField('customerType', '${scenario.correct.customerType}')">
                                <option value="">Select...</option>
                                ${fieldDefinitions.customerType.options.map(opt => 
                                    `<option value="${opt}">${opt}</option>`
                                ).join('')}
                            </select>
                        </div>
                        
                        <div class="form-field">
                            <label>Salesperson *</label>
                            <select id="salesperson" onchange="validateField('salesperson', '${scenario.correct.salesperson}')">
                                <option value="">Select...</option>
                                ${fieldDefinitions.salesperson.options.map(opt => 
                                    `<option value="${opt}">${opt}</option>`
                                ).join('')}
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="feedback" id="feedback"></div>
                
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="submitSetup()">Submit Setup</button>
                </div>
            `;
        }

        function startFieldDetective() {
            const gameArea = document.getElementById('gameArea');
            gameArea.innerHTML = `
                <h2>🕵️ Field Detective</h2>
                <p>Find and fix the error in this customer record!</p>
                
                <div class="shopworks-form">
                    <div class="shopworks-header">
                        <h3>Customer Record Review</h3>
                    </div>
                    
                    <div class="question">
                        <strong>Company:</strong> Toronto Tech Solutions<br>
                        <strong>Location:</strong> Toronto, ON, Canada<br>
                        <strong>Current Setup:</strong><br>
                        • Tax Code: <span style="color: red; font-weight: bold;">2200</span> (Vancouver)<br>
                        • Customer Type: Corporate<br>
                        • Salesperson: Erik
                    </div>
                    
                    <div class="options-grid">
                        <button class="option-btn" onclick="detectiveAnswer('taxCode')">Tax Code is wrong</button>
                        <button class="option-btn" onclick="detectiveAnswer('customerType')">Customer Type is wrong</button>
                        <button class="option-btn" onclick="detectiveAnswer('salesperson')">Salesperson is wrong</button>
                        <button class="option-btn" onclick="detectiveAnswer('none')">Everything is correct</button>
                    </div>
                </div>
                
                <div class="feedback" id="feedback"></div>
                
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="nextDetectiveCase()">Next Case</button>
                </div>
            `;
        }

        function startSpeedChallenge() {
            const gameArea = document.getElementById('gameArea');
            let timeLeft = 60;
            
            gameArea.innerHTML = `
                <h2>⚡ Speed Challenge</h2>
                <div class="timer-bar">
                    <div class="timer-fill" id="timerFill" style="width: 100%"></div>
                </div>
                
                <div class="question-container">
                    <div class="question">
                        Quick! A business in Portland, Oregon needs setup. What tax code?
                    </div>
                    
                    <div class="options-grid">
                        <button class="option-btn" onclick="speedAnswer('2200')">2200</button>
                        <button class="option-btn" onclick="speedAnswer('2202')">2202</button>
                        <button class="option-btn" onclick="speedAnswer('2203')">2203</button>
                    </div>
                </div>
                
                <div class="feedback" id="feedback"></div>
            `;
            
            // Start timer
            timer = setInterval(() => {
                timeLeft--;
                document.getElementById('timerFill').style.width = `${(timeLeft/60)*100}%`;
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    endSpeedChallenge();
                }
            }, 1000);
        }

        function checkAnswer(selected, correct) {
            const feedback = document.getElementById('feedback');
            
            if (selected === correct) {
                currentScore += 10;
                currentStreak++;
                feedback.className = 'feedback correct show';
                feedback.innerHTML = '✅ Correct! Great job!';
                event.target.classList.add('correct');
            } else {
                currentStreak = 0;
                feedback.className = 'feedback incorrect show';
                feedback.innerHTML = '❌ Not quite. The correct answer is ' + correct;
                event.target.classList.add('incorrect');
            }
            
            updateScores();
        }

        function validateField(fieldId, correctValue) {
            const field = document.getElementById(fieldId);
            if (field.value === correctValue) {
                field.classList.add('correct');
                field.classList.remove('incorrect');
            } else if (field.value !== '') {
                field.classList.add('incorrect');
                field.classList.remove('correct');
            }
        }

        function submitSetup() {
            const scenario = scenarios[currentQuestion % scenarios.length];
            const taxCode = document.getElementById('taxCode').value;
            const customerType = document.getElementById('customerType').value;
            const salesperson = document.getElementById('salesperson').value;
            
            const feedback = document.getElementById('feedback');
            
            if (taxCode === scenario.correct.taxCode && 
                customerType === scenario.correct.customerType && 
                salesperson === scenario.correct.salesperson) {
                currentScore += 25;
                currentStreak++;
                feedback.className = 'feedback correct show';
                feedback.innerHTML = '✅ Perfect setup! All fields are correct!';
                
                setTimeout(() => {
                    currentQuestion++;
                    startSetupSimulator();
                }, 2000);
            } else {
                currentStreak = 0;
                feedback.className = 'feedback incorrect show';
                feedback.innerHTML = '❌ Some fields need correction. Check the highlighted fields.';
            }
            
            updateScores();
        }

        function detectiveAnswer(selected) {
            const feedback = document.getElementById('feedback');
            
            if (selected === 'taxCode') {
                currentScore += 15;
                currentStreak++;
                feedback.className = 'feedback correct show';
                feedback.innerHTML = '✅ Correct! Toronto is outside Vancouver, so it should be 2202, not 2200.';
            } else {
                currentStreak = 0;
                feedback.className = 'feedback incorrect show';
                feedback.innerHTML = '❌ Look closer at the tax code. Toronto is not in Vancouver!';
            }
            
            updateScores();
        }

        function speedAnswer(selected) {
            const feedback = document.getElementById('feedback');
            
            if (selected === '2203') {
                currentScore += 5;
                currentStreak++;
                feedback.className = 'feedback correct show';
                feedback.innerHTML = '✅ Quick and correct!';
                
                // Generate next speed question
                setTimeout(() => {
                    generateSpeedQuestion();
                }, 1000);
            } else {
                currentStreak = 0;
                feedback.className = 'feedback incorrect show';
                feedback.innerHTML = '❌ Portland is in the USA - use 2203';
            }
            
            updateScores();
        }

        function generateSpeedQuestion() {
            const questions = [
                { q: "Business in Calgary, Alberta?", a: "2202" },
                { q: "Business in Vancouver, BC?", a: "2200" },
                { q: "Business in Los Angeles, CA?", a: "2203" },
                { q: "Business in Burnaby, BC?", a: "2200" },
                { q: "Business in Edmonton, AB?", a: "2202" }
            ];
            
            const question = questions[Math.floor(Math.random() * questions.length)];
            
            document.querySelector('.question').textContent = question.q;
            // Update onclick handlers with new correct answer
            document.querySelectorAll('.option-btn').forEach((btn, i) => {
                const codes = ['2200', '2202', '2203'];
                btn.onclick = () => speedAnswer(codes[i], question.a);
            });
        }

        function showHint() {
            document.getElementById('hintBox').classList.add('show');
        }

        function nextQuestion() {
            currentQuestion++;
            startFieldExplorer();
        }

        function nextDetectiveCase() {
            currentQuestion++;
            startFieldDetective();
        }

        function endSpeedChallenge() {
            const gameArea = document.getElementById('gameArea');
            gameArea.innerHTML = `
                <h2>⚡ Speed Challenge Complete!</h2>
                <div class="question">
                    <h3>Final Score: ${currentScore}</h3>
                    <p>Great job! You've completed the speed challenge.</p>
                </div>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="startSpeedChallenge()">Try Again</button>
                    <button class="btn btn-secondary" onclick="location.reload()">Main Menu</button>
                </div>
            `;
        }

        function updateScores() {
            document.getElementById('currentScore').textContent = currentScore;
            document.getElementById('streak').textContent = currentStreak;
            
            if (currentScore > bestScore) {
                bestScore = currentScore;
                localStorage.setItem('shopworksBestScore', bestScore);
                document.getElementById('bestScore').textContent = bestScore;
            }
            
            // Update level based on score
            currentLevel = Math.floor(currentScore / 100) + 1;
            document.getElementById('level').textContent = currentLevel;
        }
    </script>
</body>
</html>