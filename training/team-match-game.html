<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Team Match Game - Northwest Custom Apparel</title>
<link rel="icon" href="https://cdn.caspio.com/A0E15000/Safety%20Stripes/NWCA%20Favicon%20for%20TEAMNWCA.com.png?ver=1" type="image/png">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: 'Inter', sans-serif;
        background: #f5f5f5;
        color: #333;
        min-height: 100vh;
        overflow-x: hidden;
    }

    /* Navigation Header */
    .nav-header {
        background: linear-gradient(135deg, #981e32 0%, #b82940 100%);
        color: white;
        padding: 1rem 2rem;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        position: sticky;
        top: 0;
        z-index: 999;
    }

    .nav-container {
        max-width: 1400px;
        margin: 0 auto;
        display: flex;
        align-items: center;
        justify-content: space-between;
    }

    .nav-left {
        display: flex;
        align-items: center;
        gap: 1.5rem;
    }

    .back-btn {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem 1rem;
        background: rgba(255,255,255,0.1);
        border: 1px solid rgba(255,255,255,0.2);
        border-radius: 6px;
        color: white;
        text-decoration: none;
        transition: all 0.3s;
        font-weight: 500;
    }

    .back-btn:hover {
        background: rgba(255,255,255,0.2);
        transform: translateX(-2px);
    }

    .page-title {
        font-size: 1.5rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }

    .page-title i {
        font-size: 1.25rem;
        opacity: 0.9;
    }

    .nav-right {
        display: flex;
        align-items: center;
        gap: 1rem;
    }

    .logo-container {
        height: 35px;
        opacity: 0.95;
    }

    .logo-container img {
        height: 100%;
        width: auto;
    }

    /* Breadcrumb */
    .breadcrumb {
        background: white;
        padding: 0.75rem 2rem;
        border-bottom: 1px solid #e5e7eb;
        box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }

    .breadcrumb-container {
        max-width: 1400px;
        margin: 0 auto;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.875rem;
    }

    .breadcrumb a {
        color: #981e32;
        text-decoration: none;
        font-weight: 500;
        transition: color 0.2s;
    }

    .breadcrumb a:hover {
        color: #b82940;
        text-decoration: underline;
    }

    .breadcrumb span {
        color: #6b7280;
    }

    /* Game Container */
    .game-wrapper {
        background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
        color: white;
        min-height: calc(100vh - 120px);
        padding: 20px;

    }

    .container {
        max-width: 1400px;
        margin: 0 auto;
    }

    .game-header {
        text-align: center;
        margin-bottom: 30px;
        animation: slideDown 0.8s ease-out;
    }

    h1 {
        font-size: 2.5em;
        margin-bottom: 10px;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }

    .subtitle {
        color: #4CAF50;
        font-size: 1.2em;
        letter-spacing: 2px;
        margin-bottom: 20px;
    }

    .date-notice {
        color: #ffeb3b;
        font-size: 0.9em;
        margin-bottom: 15px;
        opacity: 0.9;
    }

    .game-controls {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-bottom: 25px;
        flex-wrap: wrap;
    }

    .mode-btn {
        padding: 12px 25px;
        font-size: 1em;
        background: linear-gradient(135deg, #4CAF50, #45a049);
        border: none;
        border-radius: 30px;
        color: white;
        cursor: pointer;
        transition: all 0.3s;
        box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        font-weight: 600;
    }

    .mode-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0,0,0,0.3);
    }

    .mode-btn.active {
        background: linear-gradient(135deg, #ff9800, #f57c00);
    }

    .game-info {
        display: flex;
        justify-content: center;
        gap: 30px;
        margin-bottom: 30px;
        flex-wrap: wrap;
    }

    .info-item {
        background: rgba(255,255,255,0.1);
        padding: 12px 25px;
        border-radius: 15px;
        font-size: 1.1em;
        backdrop-filter: blur(10px);
    }

    .game-area {
        display: flex;
        gap: 50px;
        justify-content: center;
        align-items: flex-start;
        margin-bottom: 30px;
    }

    .employees-column {
        background: rgba(255,255,255,0.95);
        border-radius: 15px;
        padding: 20px;
        width: 300px;
        min-height: 500px;
        box-shadow: 0 10px 40px rgba(0,0,0,0.3);
    }

    .employees-column h3 {
        color: #1e3c72;
        margin-bottom: 15px;
        text-align: center;
        font-size: 1.3em;
    }

    .employee-card {
        background: linear-gradient(135deg, #2196F3, #1976D2);
        color: white;
        padding: 12px;
        margin: 10px 0;
        border-radius: 10px;
        cursor: grab;
        transition: all 0.3s;
        font-weight: 500;
        text-align: center;
        position: relative;
        user-select: none;
        box-shadow: 0 3px 10px rgba(0,0,0,0.2);
    }

    .employee-card:hover {
        transform: translateX(5px);
        box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    }

    .employee-card.dragging {
        opacity: 0.5;
        cursor: grabbing;
        transform: rotate(5deg);
    }

    .employee-card.matched {
        background: linear-gradient(135deg, #4CAF50, #45a049);
        cursor: default;
        animation: matchSuccess 0.6s ease;
    }

    @keyframes matchSuccess {
        0% { transform: scale(1); }
        50% { transform: scale(1.1); }
        100% { transform: scale(1); }
    }

    .drop-zones {
        background: rgba(255,255,255,0.95);
        border-radius: 15px;
        padding: 20px;
        width: 400px;
        min-height: 500px;
        box-shadow: 0 10px 40px rgba(0,0,0,0.3);
    }

    .drop-zones h3 {
        color: #1e3c72;
        margin-bottom: 15px;
        text-align: center;
        font-size: 1.3em;
    }

    .drop-zone {
        background: #f5f5f5;
        border: 2px dashed #ccc;
        padding: 12px;
        margin: 10px 0;
        border-radius: 10px;
        min-height: 50px;
        transition: all 0.3s;
        position: relative;
    }

    .drop-zone.drag-over {
        background: #e3f2fd;
        border-color: #2196F3;
        transform: scale(1.02);
        box-shadow: 0 0 20px rgba(33, 150, 243, 0.3);
    }

    .drop-zone.correct {
        background: linear-gradient(135deg, #c8e6c9, #a5d6a7);
        border: 2px solid #4CAF50;
    }

    .drop-zone.incorrect {
        animation: shake 0.5s;
        background: #ffebee;
        border-color: #f44336;
    }

    @keyframes shake {
        0%, 100% { transform: translateX(0); }
        10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
        20%, 40%, 60%, 80% { transform: translateX(5px); }
    }

    .drop-zone-label {
        color: #666;
        font-size: 0.95em;
        margin-bottom: 5px;
    }

    .dropped-employee {
        background: linear-gradient(135deg, #4CAF50, #45a049);
        color: white;
        padding: 10px;
        border-radius: 8px;
        text-align: center;
        font-weight: 500;
        animation: dropIn 0.3s ease;
    }

    @keyframes dropIn {
        from {
            opacity: 0;
            transform: translateY(-10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .completion-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0.8);
        z-index: 1000;
        animation: fadeIn 0.5s;
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    .completion-message {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: linear-gradient(135deg, #4CAF50, #45a049);
        padding: 40px;
        border-radius: 20px;
        text-align: center;
        box-shadow: 0 20px 60px rgba(0,0,0,0.4);
        animation: slideIn 0.5s ease;
    }

    @keyframes slideIn {
        from {
            opacity: 0;
            transform: translate(-50%, -60%);
        }
        to {
            opacity: 1;
            transform: translate(-50%, -50%);
        }
    }

    .completion-message h2 {
        font-size: 2.5em;
        margin-bottom: 20px;
    }

    .stats {
        font-size: 1.3em;
        margin: 15px 0;
    }

    .btn {
        padding: 12px 30px;
        font-size: 1.1em;
        background: white;
        color: #4CAF50;
        border: none;
        border-radius: 25px;
        cursor: pointer;
        margin: 10px;
        transition: all 0.3s;
        font-weight: 600;
    }

    .btn:hover {
        transform: scale(1.05);
        box-shadow: 0 5px 20px rgba(0,0,0,0.2);
    }

    .instructions {
        background: rgba(255,255,255,0.1);
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 20px;
        text-align: center;
        backdrop-filter: blur(10px);
    }

    .feedback {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        padding: 20px 40px;
        border-radius: 15px;
        font-size: 1.5em;
        font-weight: bold;
        z-index: 500;
        animation: feedbackPulse 0.6s ease;
        pointer-events: none;
    }

    .feedback.correct {
        background: linear-gradient(135deg, #4CAF50, #45a049);
        color: white;
    }

    .feedback.incorrect {
        background: linear-gradient(135deg, #f44336, #e53935);
        color: white;
    }

    @keyframes feedbackPulse {
        0% { transform: translate(-50%, -50%) scale(0.8); opacity: 0; }
        50% { transform: translate(-50%, -50%) scale(1.1); opacity: 1; }
        100% { transform: translate(-50%, -50%) scale(1); opacity: 0; }
    }

    @keyframes slideDown {
        from {
            opacity: 0;
            transform: translateY(-30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @media (max-width: 768px) {
        .nav-header {
            padding: 0.75rem 1rem;
        }
        
        .nav-container {
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .page-title {
            font-size: 1.25rem;
        }
        
        .back-btn span {
            display: none;
        }
        
        .logo-container {
            height: 30px;
        }
        
        .breadcrumb {
            padding: 0.5rem 1rem;
            font-size: 0.75rem;
        }
        
        .game-area {
            flex-direction: column;
            align-items: center;
        }
        
        .employees-column, .drop-zones {
            width: 100%;
            max-width: 400px;
        }
        
        h1 {
            font-size: 1.8em;
        }
    }
</style>
</head>
<body>

<!-- Navigation Header -->
<nav class="nav-header">
    <div class="nav-container">
        <div class="nav-left">
            <a href="/staff-dashboard.html" class="back-btn">
                <i class="fas fa-arrow-left"></i>
                <span>Back to Dashboard</span>
            </a>
            <div class="page-title">
                <i class="fas fa-gamepad"></i>
                <span>Team Match Game</span>
            </div>
        </div>
        <div class="nav-right">
            <div class="logo-container">
                <img src="https://cdn.caspio.com/A0E15000/Safety%20Stripes/web%20northwest%20custom%20apparel%20logo.png?ver=1" 
                     alt="Northwest Custom Apparel">
            </div>
        </div>
    </div>
</nav>

<!-- Breadcrumb -->
<div class="breadcrumb">
    <div class="breadcrumb-container">
        <a href="/staff-dashboard.html">Staff Dashboard</a>
        <span>/</span>
        <a href="#">Training</a>
        <span>/</span>
        <span>Team Match Game</span>
    </div>
</div>

<!-- Game Wrapper -->
<div class="game-wrapper">
    <div class="container">
        <div class="game-header">
            <h1>üéØ NWCA Team Match Game</h1>
            <div class="subtitle">NW CUSTOM APPAREL - LEARN YOUR TEAM</div>
            <div class="date-notice" id="dateNotice"></div>
        </div>
    
    <div class="instructions">
        üìã Drag employee names to their matching information. Wrong matches will bounce back!
    </div>

    <div class="game-controls">
        <button class="mode-btn active" onclick="setGameMode('tenure')">Years of Service</button>
        <button class="mode-btn" onclick="setGameMode('position')">Job Positions</button>
        <button class="mode-btn" onclick="setGameMode('birthday')">Birthdays</button>
        <button class="mode-btn" onclick="setGameMode('mix')">Mix Challenge</button>
    </div>

    <div class="game-info">
        <div class="info-item">‚è±Ô∏è Time: <span id="timer">0</span>s</div>
        <div class="info-item">‚úÖ Matches: <span id="score">0</span>/<span id="total">0</span></div>
        <div class="info-item">‚ùå Attempts: <span id="attempts">0</span></div>
    </div>

    <div class="game-area">
        <div class="employees-column">
            <h3>Employee Names</h3>
            <div id="employeesList"></div>
        </div>
        
        <div class="drop-zones">
            <h3 id="dropZoneTitle">Years at NWCA</h3>
            <div id="dropZonesList"></div>
        </div>
    </div>
    </div>
</div>

<div class="completion-overlay" id="completionOverlay">
    <div class="completion-message">
        <h2>üéâ Excellent Job!</h2>
        <div class="stats">
            <p>Mode: <span id="completedMode"></span></p>
            <p>Time: <span id="finalTime"></span> seconds</p>
            <p>Attempts: <span id="finalAttempts"></span></p>
            <p>Accuracy: <span id="accuracy"></span>%</p>
        </div>
        <button class="btn" onclick="playAgain()">Play Again</button>
        <button class="btn" onclick="nextMode()">Next Challenge</button>
    </div>
</div>

<script>
// Employee data - matches staff directory
const employees = [
    { firstName: "Jim", lastName: "Mickelson", startDate: "1977-10-31", birthday: "03-25", position: "CEO" },
    { firstName: "Erik", lastName: "Mickelson", startDate: "1996-12-16", birthday: "02-14", position: "Operations Manager" },
    { firstName: "Ruth", lastName: "Nhong", startDate: "1998-08-05", birthday: "01-19", position: "Production Manager" },
    { firstName: "Savy", lastName: "Som", startDate: "2008-04-21", birthday: "09-08", position: "Embroidery Machine Operator" },
    { firstName: "Sorphorn", lastName: "Sorm", startDate: "2011-04-11", birthday: "07-10", position: "Embroidery Machine Operator" },
    { firstName: "Nika", lastName: "Lao", startDate: "2012-07-31", birthday: "06-29", position: "Account Executive" },
    { firstName: "Taylar", lastName: "Hanson", startDate: "2015-04-20", birthday: "06-30", position: "Account Executive" },
    { firstName: "Bunsereytheavy", lastName: "Hoeu", startDate: "2015-05-19", birthday: "01-01", position: "Embroidery Machine Operator" },
    { firstName: "Bradley", lastName: "Wright", startDate: "2017-08-10", birthday: "01-09", position: "Accounting/Purchasing/Webstores" },
    { firstName: "Steve", lastName: "Deland", startDate: "2017-09-28", birthday: "06-30", position: "Graphic Artist" },
    { firstName: "Kanha", lastName: "Chhorn", startDate: "2018-02-21", birthday: "06-11", position: "Embroidery Supervisor & Machine Operator" },
    { firstName: "Brian", lastName: "Beardsley", startDate: "2018-08-13", birthday: "06-29", position: "DTG Supervisor" },
    { firstName: "Sreynai", lastName: "Meang", startDate: "2019-12-09", birthday: "09-02", position: "Embroidery Machine Operator" },
    { firstName: "Sothea", lastName: "Tann", startDate: "2022-09-22", birthday: "04-23", position: "Embroidery Machine Operator" },
    { firstName: "Joseph", lastName: "Hallowell", startDate: "2023-04-03", birthday: "08-14", position: "DTG Operator" },
    { firstName: "Sothida", lastName: "Khiev", startDate: "2024-03-01", birthday: "06-29", position: "Embroidery Machine Operator" },
    { firstName: "Mikalah", lastName: "Hede", startDate: "2024-10-03", birthday: "04-21", position: "Shipping/Receiving Clerk" },
    { firstName: "Adriyella", lastName: "Trujillo", startDate: "2025-02-17", birthday: "02-10", position: "Office Assistant" }
    // Taneisha Clark starts 2025-08-12 - not included until start date
];

let currentMode = 'tenure';
let gameData = {};
let score = 0;
let attempts = 0;
let timer = null;
let timeElapsed = 0;
let draggedElement = null;
let draggedName = null;

// Function to calculate years of service - matches dashboard implementation
function calculateYearsOfService(startDate) {
    const start = new Date(startDate);
    const now = new Date();
    
    let years = now.getFullYear() - start.getFullYear();
    const monthDiff = now.getMonth() - start.getMonth();
    
    if (monthDiff < 0 || (monthDiff === 0 && now.getDate() < start.getDate())) {
        years--;
    }
    
    return Math.max(0, years);
}

// Function to calculate time of service - returns years or months as appropriate
function calculateTimeOfService(startDate) {
    const start = new Date(startDate);
    const now = new Date();
    
    // Calculate total months
    let totalMonths = (now.getFullYear() - start.getFullYear()) * 12;
    totalMonths += now.getMonth() - start.getMonth();
    
    // Adjust if the day hasn't been reached yet this month
    if (now.getDate() < start.getDate()) {
        totalMonths--;
    }
    
    totalMonths = Math.max(0, totalMonths);
    
    // If 12 or more months, return years
    if (totalMonths >= 12) {
        const years = Math.floor(totalMonths / 12);
        return years === 1 ? '1 Year' : `${years} Years`;
    } else {
        // Return months for less than a year
        return totalMonths === 1 ? '1 Month' : `${totalMonths} Months`;
    }
}

function formatBirthday(birthday) {
    if (!birthday) return null;
    const [month, day] = birthday.split('-');
    const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
    return `${months[parseInt(month) - 1]} ${parseInt(day)}`;
}

function updateDateNotice() {
    const now = new Date();
    const options = { year: 'numeric', month: 'long', day: 'numeric' };
    const dateStr = now.toLocaleDateString('en-US', options);
    document.getElementById('dateNotice').textContent = `Years of service calculated as of ${dateStr}`;
}

function shuffle(array) {
    const newArray = [...array];
    for (let i = newArray.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
    }
    return newArray;
}

function setGameMode(mode) {
    currentMode = mode;
    document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
    event.target.classList.add('active');
    initGame();
}

function initGame() {
    clearInterval(timer);
    timeElapsed = 0;
    score = 0;
    attempts = 0;
    gameData = {};
    
    document.getElementById('timer').textContent = '0';
    document.getElementById('score').textContent = '0';
    document.getElementById('attempts').textContent = '0';
    
    const activeEmployees = employees.filter(e => new Date(e.startDate) <= new Date());
    const employeesList = document.getElementById('employeesList');
    const dropZonesList = document.getElementById('dropZonesList');
    const dropZoneTitle = document.getElementById('dropZoneTitle');
    
    employeesList.innerHTML = '';
    dropZonesList.innerHTML = '';
    
    let dropZoneData = [];
    
    switch(currentMode) {
        case 'tenure':
            dropZoneTitle.textContent = 'Time at NWCA';
            activeEmployees.forEach(emp => {
                const name = `${emp.firstName} ${emp.lastName}`;
                const timeText = calculateTimeOfService(emp.startDate);
                gameData[name] = timeText;
                dropZoneData.push({ label: timeText, value: timeText });
            });
            break;
            
        case 'position':
            dropZoneTitle.textContent = 'Job Positions';
            activeEmployees.forEach(emp => {
                const name = `${emp.firstName} ${emp.lastName}`;
                gameData[name] = emp.position;
                dropZoneData.push({ label: emp.position, value: emp.position });
            });
            break;
            
        case 'birthday':
            dropZoneTitle.textContent = 'Birthdays';
            const withBirthdays = activeEmployees.filter(e => e.birthday);
            withBirthdays.forEach(emp => {
                const name = `${emp.firstName} ${emp.lastName}`;
                const bday = formatBirthday(emp.birthday);
                gameData[name] = bday;
                dropZoneData.push({ label: bday, value: bday });
            });
            break;
            
        case 'mix':
            dropZoneTitle.textContent = 'Mixed Information';
            const mixEmployees = shuffle(activeEmployees).slice(0, 12);
            mixEmployees.forEach(emp => {
                const name = `${emp.firstName} ${emp.lastName}`;
                const random = Math.random();
                if (random < 0.33) {
                    const timeText = calculateTimeOfService(emp.startDate);
                    gameData[name] = timeText;
                    dropZoneData.push({ label: timeText, value: timeText });
                } else if (random < 0.66 && emp.birthday) {
                    const bday = formatBirthday(emp.birthday);
                    gameData[name] = bday;
                    dropZoneData.push({ label: bday, value: bday });
                } else {
                    gameData[name] = emp.position;
                    dropZoneData.push({ label: emp.position, value: emp.position });
                }
            });
            break;
    }
    
    // Create employee cards
    shuffle(Object.keys(gameData)).forEach(name => {
        const card = document.createElement('div');
        card.className = 'employee-card';
        card.textContent = name;
        card.draggable = true;
        card.dataset.name = name;
        
        card.addEventListener('dragstart', handleDragStart);
        card.addEventListener('dragend', handleDragEnd);
        
        employeesList.appendChild(card);
    });
    
    // Create drop zones
    shuffle(dropZoneData).forEach(item => {
        const zone = document.createElement('div');
        zone.className = 'drop-zone';
        zone.dataset.value = item.value;
        zone.innerHTML = `<div class="drop-zone-label">${item.label}</div>`;
        
        zone.addEventListener('dragover', handleDragOver);
        zone.addEventListener('drop', handleDrop);
        zone.addEventListener('dragleave', handleDragLeave);
        
        dropZonesList.appendChild(zone);
    });
    
    document.getElementById('total').textContent = Object.keys(gameData).length;
    
    // Start timer
    timer = setInterval(() => {
        timeElapsed++;
        document.getElementById('timer').textContent = timeElapsed;
    }, 1000);
}

function handleDragStart(e) {
    draggedElement = e.target;
    draggedName = e.target.dataset.name;
    e.target.classList.add('dragging');
}

function handleDragEnd(e) {
    e.target.classList.remove('dragging');
}

function handleDragOver(e) {
    e.preventDefault();
    e.currentTarget.classList.add('drag-over');
}

function handleDragLeave(e) {
    e.currentTarget.classList.remove('drag-over');
}

function handleDrop(e) {
    e.preventDefault();
    const dropZone = e.currentTarget;
    dropZone.classList.remove('drag-over');
    
    // Check if zone already has an employee
    if (dropZone.querySelector('.dropped-employee')) {
        showFeedback(false);
        return;
    }
    
    const expectedValue = dropZone.dataset.value;
    const actualValue = gameData[draggedName];
    
    attempts++;
    document.getElementById('attempts').textContent = attempts;
    
    if (expectedValue === actualValue) {
        // Correct match
        dropZone.classList.add('correct');
        dropZone.innerHTML = `<div class="dropped-employee">${draggedName}</div>`;
        draggedElement.classList.add('matched');
        draggedElement.draggable = false;
        
        score++;
        document.getElementById('score').textContent = score;
        
        showFeedback(true);
        
        if (score === Object.keys(gameData).length) {
            clearInterval(timer);
            setTimeout(showCompletion, 1000);
        }
    } else {
        // Incorrect match
        dropZone.classList.add('incorrect');
        setTimeout(() => {
            dropZone.classList.remove('incorrect');
        }, 600);
        
        showFeedback(false);
    }
}

function showFeedback(isCorrect) {
    const existing = document.querySelector('.feedback');
    if (existing) existing.remove();
    
    const feedback = document.createElement('div');
    feedback.className = `feedback ${isCorrect ? 'correct' : 'incorrect'}`;
    feedback.textContent = isCorrect ? '‚úì Correct!' : '‚úó Try Again';
    document.body.appendChild(feedback);
    
    setTimeout(() => feedback.remove(), 600);
}

function showCompletion() {
    const accuracy = Math.round((score / attempts) * 100) || 100;
    const modeNames = {
        'tenure': 'Years of Service',
        'position': 'Job Positions',
        'birthday': 'Birthdays',
        'mix': 'Mix Challenge'
    };
    
    document.getElementById('completedMode').textContent = modeNames[currentMode];
    document.getElementById('finalTime').textContent = timeElapsed;
    document.getElementById('finalAttempts').textContent = attempts;
    document.getElementById('accuracy').textContent = accuracy;
    document.getElementById('completionOverlay').style.display = 'block';
}

function playAgain() {
    document.getElementById('completionOverlay').style.display = 'none';
    initGame();
}

function nextMode() {
    const modes = ['tenure', 'position', 'birthday', 'mix'];
    const currentIndex = modes.indexOf(currentMode);
    const nextIndex = (currentIndex + 1) % modes.length;
    currentMode = modes[nextIndex];
    
    document.querySelectorAll('.mode-btn').forEach((btn, index) => {
        btn.classList.toggle('active', index === nextIndex);
    });
    
    document.getElementById('completionOverlay').style.display = 'none';
    initGame();
}

// Initialize game on load
window.addEventListener('DOMContentLoaded', () => {
    updateDateNotice();
    initGame();
});
</script>

</body>
</html>