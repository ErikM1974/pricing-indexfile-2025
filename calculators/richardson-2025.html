<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>Richardson Cap Pricing Calculator - Northwest Custom Apparel</title>
    <link rel="icon" href="https://cdn.caspio.com/A0E15000/Safety%20Stripes/NWCA%20Favicon%20for%20TEAMNWCA.com.png?ver=1" type="image/png">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    
    <!-- Shared Calculator Styles -->
    <link href="../shared_components/css/calculator-base.css" rel="stylesheet">
    <!-- Richardson-Specific Styles -->
    <link href="richardson-2025-styles.css" rel="stylesheet">
    
    <!-- EmailJS SDK -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    
    <!-- Base Quote Service -->
    <script src="../shared_components/js/base-quote-service.js"></script>
    <!-- Calculator Utilities -->
    <script src="../shared_components/js/calculator-utilities.js"></script>
    <!-- Richardson Quote Service -->
    <script src="richardson-quote-service.js"></script>
    <!-- Richardson Calculator Class -->
    <script src="richardson-caps-calculator.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-container">
            <div class="header-left">
                <img src="https://cdn.caspio.com/A0E15000/Safety%20Stripes/web%20northwest%20custom%20apparel%20logo.png?ver=1" alt="Northwest Custom Apparel" class="logo">
                <nav class="breadcrumb">
                    <a href="/staff-dashboard.html">Dashboard</a>
                    <span>/</span>
                    <span>Richardson Cap Pricing</span>
                </nav>
            </div>
            <div class="header-right">
                <button class="help-btn" onclick="if(window.richardsonCalculator && window.richardsonCalculator.currentQuote) { window.richardsonCalculator.printQuote(); } else { alert('Please generate a quote first'); }">
                    <i class="fas fa-print"></i>
                    Print Quote
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-container">
        <div class="page-header">
            <div class="page-header-left">
                <h1 class="page-title">Richardson Cap Pricing Calculator</h1>
                <p class="page-subtitle">Build multi-style cap quotes with embroidery or leatherette patch</p>
            </div>
            <img src="https://cdn.caspio.com/A0E15000/Safety%20Stripes/richardson-sports-logo-vector.png?ver=1" alt="Richardson Headwear" class="richardson-logo">
        </div>

        <div class="calculator-grid">
            <!-- Input Section -->
            <div class="input-section">
                <h2 class="section-title">
                    <i class="fas fa-calculator"></i>
                    Build Your Quote
                </h2>

                <form id="pricingForm">
                    <!-- Customer Info -->
                    <div class="form-group">
                        <label class="form-label" for="customerName">Customer Name</label>
                        <input type="text" id="customerName" class="form-input" placeholder="e.g., Erik Mickelson">
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="projectName">Project Name</label>
                        <input type="text" id="projectName" class="form-input" placeholder="e.g., Milton Wildcats Caps">
                    </div>

                    <!-- Sales Representative -->
                    <div class="form-group">
                        <label class="form-label" for="mainSalesRep">Sales Representative *</label>
                        <select id="mainSalesRep" class="form-select" required>
                            <option value="sales@nwcustomapparel.com" selected>General Sales: sales@nwcustomapparel.com</option>
                            <option value="ruth@nwcustomapparel.com">Ruth Nhong: ruth@nwcustomapparel.com</option>
                            <option value="taylar@nwcustomapparel.com">Taylar Hanson: taylar@nwcustomapparel.com</option>
                            <option value="nika@nwcustomapparel.com">Nika Lao: nika@nwcustomapparel.com</option>
                            <option value="erik@nwcustomapparel.com">Erik Mickelson: erik@nwcustomapparel.com</option>
                            <option value="adriyella@nwcustomapparel.com">Adriyella: adriyella@nwcustomapparel.com</option>
                            <option value="bradley@nwcustomapparel.com">Bradley Wright: bradley@nwcustomapparel.com</option>
                            <option value="jim@nwcustomapparel.com">Jim Mickelson: jim@nwcustomapparel.com</option>
                            <option value="art@nwcustomapparel.com">Steve Deland: art@nwcustomapparel.com</option>
                        </select>
                    </div>

                    <!-- Embellishment Type -->
                    <div class="form-group">
                        <label class="form-label">Embellishment Type</label>
                        <div class="embellishment-options">
                            <label class="radio-option">
                                <input type="radio" name="embellishment" value="embroidery" checked>
                                <span>Embroidery</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="embellishment" value="leatherette">
                                <span>Leatherette Patch</span>
                            </label>
                        </div>
                    </div>

                    <!-- Stitch Count -->
                    <div class="form-group" id="stitchCountGroup">
                        <label class="form-label" for="stitchCount">Embroidery Stitch Count (for all styles)</label>
                        <select id="stitchCount" class="form-select">
                            <option value="5000">Up to 5,000 stitches</option>
                            <option value="8000" selected>Up to 8,000 stitches</option>
                            <option value="10000">Up to 10,000 stitches</option>
                        </select>
                    </div>

                    <!-- Line Items -->
                    <div class="form-group">
                        <label class="form-label">Cap Styles</label>
                        <div id="lineItemsContainer" class="line-items-container">
                            <!-- Dynamic line items will be added here -->
                        </div>
                        <button type="button" id="addStyleBtn" class="btn btn-secondary" style="margin-top: 0.75rem; width: auto;">
                            <i class="fas fa-plus"></i>
                            Add Another Style
                        </button>
                    </div>

                    <!-- Setup Fees Section -->
                    <div class="form-group">
                        <label class="form-label">
                            <i class="fas fa-dollar-sign"></i>
                            Setup Fees (Optional)
                        </label>
                        <div class="setup-fees-container" style="background: #f8f9fa; padding: 1rem; border-radius: 8px; margin-top: 0.5rem;">
                            <!-- Digitizing Fee -->
                            <div class="checkbox-group" style="margin-bottom: 1rem;">
                                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="checkbox" id="digitizingFee" value="100">
                                    <span>Digitizing Fee - $100.00</span>
                                </label>
                            </div>
                            
                            <!-- Graphic Design Fee -->
                            <div class="form-group" style="margin-bottom: 1rem;">
                                <label class="form-label" style="font-size: 0.875rem;">Graphic Design Fee</label>
                                <div style="display: flex; gap: 0.5rem; align-items: center;">
                                    <select id="graphicDesignFee" class="form-select" style="flex: 1;">
                                        <option value="0">None</option>
                                        <option value="50">$50.00</option>
                                        <option value="75">$75.00</option>
                                        <option value="custom">Custom Amount</option>
                                    </select>
                                    <input type="number" id="graphicDesignCustom" class="form-input" placeholder="Amount" 
                                           style="display: none; width: 120px;" min="0" step="0.01">
                                </div>
                            </div>
                            
                            <!-- Additional Fees -->
                            <div class="form-group" style="margin-bottom: 0;">
                                <label class="form-label" style="font-size: 0.875rem;">Additional Fees</label>
                                <div id="additionalFeesContainer">
                                    <!-- Dynamic fees will be added here -->
                                </div>
                                <button type="button" id="addFeeBtn" class="btn btn-secondary" style="margin-top: 0.5rem; font-size: 0.875rem;">
                                    <i class="fas fa-plus"></i>
                                    Add Fee
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Notes Section -->
                    <div class="form-group">
                        <label class="form-label" for="quoteNotes">
                            <i class="fas fa-sticky-note"></i>
                            Quote Notes (Optional)
                        </label>
                        <textarea id="quoteNotes" class="form-input" rows="3" 
                                  placeholder="Add any special notes or instructions for this quote..."></textarea>
                    </div>

                    <!-- Action Buttons -->
                    <div class="button-container">
                        <button type="submit" class="btn btn-primary btn-fullwidth">
                            <i class="fas fa-save"></i>
                            Generate Quote
                        </button>
                    </div>
                </form>
            </div>

            <!-- Results Section -->
            <div class="results-section">
                <div id="emptyState" class="empty-state">
                    <i class="fas fa-clipboard-list"></i>
                    <h3>Your quote will appear here</h3>
                    <p>Add cap styles and quantities to get started</p>
                </div>

                <div id="resultsDisplay" class="hidden">
                    <!-- Quote results will be displayed here -->
                </div>
            </div>
        </div>
        <!-- Pricing Reference Table -->
        <div class="pricing-reference">
            <div class="reference-header">
                <h3 class="reference-title">Embellishment Pricing Reference</h3>
                <p class="reference-note">Base decoration costs only - cap price additional</p>
            </div>
            
            <div class="reference-grid">
                <!-- Embroidery Table -->
                <div class="reference-table">
                    <h4><i class="fas fa-thread"></i> Embroidery (8,000 stitches)</h4>
                    <table>
                        <thead>
                            <tr>
                                <th>Quantity</th>
                                <th>Price</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1-23</td>
                                <td>$12.00</td>
                            </tr>
                            <tr>
                                <td>24-47</td>
                                <td>$11.00</td>
                            </tr>
                            <tr>
                                <td>48-71</td>
                                <td>$10.00</td>
                            </tr>
                            <tr>
                                <td>72+</td>
                                <td>$8.50</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Leatherette Table -->
                <div class="reference-table">
                    <h4><i class="fas fa-tag"></i> Leatherette Patch</h4>
                    <table>
                        <thead>
                            <tr>
                                <th>Quantity</th>
                                <th>Patch</th>
                                <th>Labor</th>
                                <th>Total</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1-23</td>
                                <td class="text-right">$8.40</td>
                                <td class="text-right">$4.00</td>
                                <td>$12.40</td>
                            </tr>
                            <tr>
                                <td>24-47</td>
                                <td class="text-right">$7.34</td>
                                <td class="text-right">$4.00</td>
                                <td>$11.34</td>
                            </tr>
                            <tr>
                                <td>48-71</td>
                                <td class="text-right">$7.34</td>
                                <td class="text-right">$3.00</td>
                                <td>$10.34</td>
                            </tr>
                            <tr>
                                <td>72+</td>
                                <td class="text-right">$6.03</td>
                                <td class="text-right">$2.75</td>
                                <td>$8.78</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="reference-footer">
                <p><i class="fas fa-info-circle"></i> Orders under 24 pieces incur a $50 Less Than Minimum fee</p>
                <p><i class="fas fa-calculator"></i> Final price = (Cap Price รท 0.6) + Embellishment + Round Up</p>
            </div>
        </div>
    </main>

    <!-- Quote Modal -->
    <div id="quoteModal" class="modal-backdrop">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Email Quote</h2>
                <button type="button" class="modal-close" id="modalClose">&times;</button>
            </div>

            <p style="margin: 1rem 0; padding: 0.75rem; background: #f0f7f1; border-radius: 6px; font-size: 0.875rem; color: #155724;">
                <i class="fas fa-info-circle"></i> Emailing your saved quote. No changes will be made to the quote in our system.
            </p>

            <!-- Sales Rep Selection -->
            <div class="form-group">
                <label class="form-label" for="salesRep">Sales Representative</label>
                <select id="salesRep" class="form-select" required>
                    <option value="">Select a sales rep...</option>
                    <option value="sales@nwcustomapparel.com" selected>General Sales</option>
                    <option value="taylar@nwcustomapparel.com">Taylar</option>
                    <option value="nika@nwcustomapparel.com">Nika</option>
                    <option value="erik@nwcustomapparel.com">Erik</option>
                    <option value="adriyella@nwcustomapparel.com">Adriyella</option>
                </select>
            </div>

            <form id="quoteForm">
                <div class="form-group">
                    <label class="form-label" for="quoteCustomerName">Customer Name</label>
                    <input type="text" id="quoteCustomerName" class="form-input" required>
                </div>

                <div class="form-group">
                    <label class="form-label" for="customerEmail">Customer Email</label>
                    <input type="email" id="customerEmail" class="form-input" required placeholder="customer@example.com">
                </div>

                <div class="form-group">
                    <label class="form-label" for="customerPhone">Phone Number (optional)</label>
                    <input type="tel" id="customerPhone" class="form-input" placeholder="(555) 123-4567">
                </div>

                <div class="form-group">
                    <label class="form-label" for="companyName">Company Name (optional)</label>
                    <input type="text" id="companyName" class="form-input">
                </div>

                <div class="form-group">
                    <label class="form-label" for="notes">Notes (optional)</label>
                    <textarea id="notes" class="form-input" rows="3" placeholder="Any special instructions or notes..."></textarea>
                </div>


                <div id="quotePreview" class="quote-summary">
                    <!-- Quote preview will be shown here -->
                </div>

                <button type="submit" class="btn btn-success btn-fullwidth">
                    <i class="fas fa-paper-plane"></i>
                    Send Quote
                </button>
            </form>

            <div id="successMessage" class="success-message hidden">
                <i class="fas fa-check-circle"></i>
                <span>Quote sent successfully!</span>
                <span id="quoteIdDisplay" style="display: block; font-weight: bold; margin-top: 0.5rem;"></span>
            </div>

            <div id="errorMessage" class="error-message hidden">
                <i class="fas fa-exclamation-circle"></i>
                <span id="errorText">An error occurred. Please try again.</span>
            </div>
        </div>
    </div>


    <script>
        // Initialize calculator when DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            window.richardsonCalculator = new RichardsonCalculator();
        });
    </script>
</body>
</html>