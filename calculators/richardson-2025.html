<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>Richardson Cap Pricing Calculator - Northwest Custom Apparel</title>
    <link rel="icon" href="https://cdn.caspio.com/A0E15000/Safety%20Stripes/NWCA%20Favicon%20for%20TEAMNWCA.com.png?ver=1" type="image/png">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    
    <!-- Shared Calculator Styles -->
    <link href="../shared_components/css/calculator-base.css" rel="stylesheet">
    <!-- Modern CSS Enhancements Layer (Progressive Enhancement) -->
    <link href="../shared_components/css/calculator-modern-enhancements.css" rel="stylesheet">
    <!-- Richardson-Specific Styles -->
    <link href="richardson-2025-styles.css" rel="stylesheet">
    
    <!-- EmailJS SDK -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    
    <!-- Base Quote Service -->
    <script src="../shared_components/js/base-quote-service.js"></script>
    <!-- Calculator Utilities -->
    <script src="../shared_components/js/calculator-utilities.js"></script>
    <!-- Richardson Quote Service -->
    <script src="richardson-quote-service.js"></script>
    <!-- Richardson Calculator Class -->
    <script src="richardson-caps-calculator.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-container">
            <div class="header-left">
                <img src="https://cdn.caspio.com/A0E15000/Safety%20Stripes/web%20northwest%20custom%20apparel%20logo.png?ver=1" alt="Northwest Custom Apparel" class="logo">
                <nav class="breadcrumb">
                    <a href="/staff-dashboard.html">Dashboard</a>
                    <span>/</span>
                    <span>Richardson Cap Pricing</span>
                </nav>
            </div>
            <div class="header-right">
                <button class="help-btn" onclick="if(window.richardsonCalculator && window.richardsonCalculator.currentQuote) { window.richardsonCalculator.printQuote(); } else { alert('Please generate a quote first'); }">
                    <i class="fas fa-print"></i>
                    Print Quote
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-container">
        <div class="page-header">
            <div class="page-header-left">
                <h1 class="page-title">Richardson Cap Pricing Calculator</h1>
                <p class="page-subtitle">Build multi-style cap quotes with embroidery or leatherette patch</p>
            </div>
            <img src="https://cdn.caspio.com/A0E15000/Safety%20Stripes/richardson-sports-logo-vector.png?ver=1" alt="Richardson Headwear" class="richardson-logo">
        </div>

        <!-- Compact Richardson 112 Hero Strip -->
        <div class="compact-showcase" id="productShowcase">
            <div class="showcase-strip">
                <div class="strip-content">
                    <div class="strip-text">
                        <i class="fas fa-star" style="color: #fbbf24;"></i>
                        <span class="strip-title">Featured: Richardson 112</span>
                        <span class="strip-subtitle">#1 Best Seller</span>
                    </div>
                    <div class="strip-images">
                        <img src="https://c3eku948.caspio.com/dp/a0e150004df4984fb1ef4d30b01a/files/9114122" 
                             alt="Front" class="strip-thumb" title="Front View">
                        <img src="https://c3eku948.caspio.com/dp/a0e150004df4984fb1ef4d30b01a/files/9114123" 
                             alt="Side" class="strip-thumb" title="Side View">
                        <img src="https://c3eku948.caspio.com/dp/a0e150004df4984fb1ef4d30b01a/files/9114124" 
                             alt="Back" class="strip-thumb" title="Back View">
                    </div>
                    <div class="strip-features">
                        <span class="mini-badge">Mid-Profile</span>
                        <span class="mini-badge">Pre-Curved</span>
                        <span class="mini-badge">Snapback</span>
                        <span class="mini-badge">60/40 Blend</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Calculator Container -->
        <div class="calculator-container">
            <!-- Input Section -->
            <div class="input-section">
                <h2 class="section-title">
                    <i class="fas fa-calculator"></i>
                    Build Your Quote
                </h2>

                <form id="pricingForm">
                    <!-- Customer Info -->
                    <div class="form-group">
                        <label class="form-label" for="customerName">Customer Name</label>
                        <input type="text" id="customerName" class="form-input" placeholder="e.g., Erik Mickelson">
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="projectName">Project Name</label>
                        <input type="text" id="projectName" class="form-input" placeholder="e.g., Milton Wildcats Caps">
                    </div>

                    <!-- Sales Representative -->
                    <div class="form-group">
                        <label class="form-label" for="mainSalesRep">Sales Representative *</label>
                        <select id="mainSalesRep" class="form-select" required>
                            <option value="sales@nwcustomapparel.com" selected>General Sales: sales@nwcustomapparel.com</option>
                            <option value="ruth@nwcustomapparel.com">Ruth Nhong: ruth@nwcustomapparel.com</option>
                            <option value="taylar@nwcustomapparel.com">Taylar Hanson: taylar@nwcustomapparel.com</option>
                            <option value="nika@nwcustomapparel.com">Nika Lao: nika@nwcustomapparel.com</option>
                            <option value="taneisha@nwcustomapparel.com">Taneisha Clark: taneisha@nwcustomapparel.com</option>
                            <option value="erik@nwcustomapparel.com">Erik Mickelson: erik@nwcustomapparel.com</option>
                            <option value="adriyella@nwcustomapparel.com">Adriyella: adriyella@nwcustomapparel.com</option>
                            <option value="bradley@nwcustomapparel.com">Bradley Wright: bradley@nwcustomapparel.com</option>
                            <option value="jim@nwcustomapparel.com">Jim Mickelson: jim@nwcustomapparel.com</option>
                            <option value="art@nwcustomapparel.com">Steve Deland: art@nwcustomapparel.com</option>
                        </select>
                    </div>

                    <!-- Embellishment Type -->
                    <div class="form-group">
                        <label class="form-label">Embellishment Type</label>
                        <div class="embellishment-options">
                            <label class="radio-option">
                                <input type="radio" name="embellishment" value="embroidery" checked>
                                <span>Embroidery</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="embellishment" value="leatherette">
                                <span>Leatherette Patch</span>
                            </label>
                        </div>
                    </div>

                    <!-- Stitch Count -->
                    <div class="form-group" id="stitchCountGroup">
                        <label class="form-label" for="stitchCount">Embroidery Stitch Count (for all styles)</label>
                        <select id="stitchCount" class="form-select">
                            <option value="5000">Up to 5,000 stitches</option>
                            <option value="8000" selected>Up to 8,000 stitches</option>
                            <option value="10000">Up to 10,000 stitches</option>
                        </select>
                    </div>

                    <!-- Line Items -->
                    <div class="form-group">
                        <label class="form-label">Cap Styles</label>
                        <div id="lineItemsContainer" class="line-items-container">
                            <!-- Dynamic line items will be added here -->
                        </div>
                        <button type="button" id="addStyleBtn" class="btn btn-secondary" style="margin-top: 0.75rem; width: auto;">
                            <i class="fas fa-plus"></i>
                            Add Another Style
                        </button>
                    </div>

                    <!-- Setup Fees Section (Collapsible) -->
                    <div class="form-group setup-fees-accordion">
                        <button type="button" class="setup-accordion-toggle" id="setupFeesToggle">
                            <div class="toggle-header">
                                <i class="fas fa-dollar-sign"></i>
                                <span>Setup Fees (Optional)</span>
                            </div>
                            <i class="fas fa-chevron-down setup-accordion-icon"></i>
                        </button>
                        <div class="setup-accordion-content" id="setupFeesContent">
                            <div class="setup-fees-inner">
                                <!-- Digitizing Fee -->
                                <div class="checkbox-group" style="margin-bottom: 1rem;">
                                    <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                        <input type="checkbox" id="digitizingFee" value="100">
                                        <span>Digitizing Fee - $100.00</span>
                                    </label>
                                </div>
                                
                                <!-- Graphic Design Fee -->
                                <div class="form-group" style="margin-bottom: 1rem;">
                                    <label class="form-label" style="font-size: 0.875rem;">Graphic Design Fee</label>
                                    <div style="display: flex; gap: 0.5rem; align-items: center;">
                                        <select id="graphicDesignFee" class="form-select" style="flex: 1;">
                                            <option value="0">None</option>
                                            <option value="50">$50.00</option>
                                            <option value="75">$75.00</option>
                                            <option value="custom">Custom Amount</option>
                                        </select>
                                        <input type="number" id="graphicDesignCustom" class="form-input" placeholder="Amount" 
                                               style="display: none; width: 120px;" min="0" step="0.01">
                                    </div>
                                </div>
                                
                                <!-- Additional Fees -->
                                <div class="form-group" style="margin-bottom: 0;">
                                    <label class="form-label" style="font-size: 0.875rem;">Additional Fees</label>
                                    <div id="additionalFeesContainer">
                                        <!-- Dynamic fees will be added here -->
                                    </div>
                                    <button type="button" id="addFeeBtn" class="btn btn-secondary" style="margin-top: 0.5rem; font-size: 0.875rem;">
                                        <i class="fas fa-plus"></i>
                                        Add Fee
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Notes Section -->
                    <div class="form-group">
                        <label class="form-label" for="quoteNotes">
                            <i class="fas fa-sticky-note"></i>
                            Quote Notes (Optional)
                        </label>
                        <textarea id="quoteNotes" class="form-input" rows="3" 
                                  placeholder="Add any special notes or instructions for this quote..."></textarea>
                    </div>

                    <!-- Action Buttons -->
                    <div class="button-container">
                        <button type="submit" class="btn btn-primary btn-fullwidth">
                            <i class="fas fa-save"></i>
                            Generate Quote
                        </button>
                    </div>
                </form>
            </div>

            <!-- Results Section - Below Form -->
            <div class="results-section" id="resultsSection" style="display: none;">
                <div class="results-header">
                    <h2 class="section-title">
                        <i class="fas fa-file-invoice-dollar"></i>
                        Quote Details
                    </h2>
                    <div class="quote-actions">
                        <button type="button" class="btn btn-secondary" onclick="window.richardsonCalculator.printQuote();">
                            <i class="fas fa-print"></i> Print
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="window.richardsonCalculator.emailQuote();">
                            <i class="fas fa-envelope"></i> Email
                        </button>
                        <button type="button" class="btn btn-primary" onclick="window.richardsonCalculator.newQuote();">
                            <i class="fas fa-plus"></i> New Quote
                        </button>
                    </div>
                </div>

                <div id="resultsDisplay">
                    <!-- Quote results will be displayed here -->
                </div>
            </div>
        </div>
    </main>

    <!-- Quote Modal -->
    <div id="quoteModal" class="modal-backdrop">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Email Quote</h2>
                <button type="button" class="modal-close" id="modalClose">&times;</button>
            </div>

            <p style="margin: 1rem 0; padding: 0.75rem; background: #f0f7f1; border-radius: 6px; font-size: 0.875rem; color: #155724;">
                <i class="fas fa-info-circle"></i> Emailing your saved quote. No changes will be made to the quote in our system.
            </p>

            <!-- Sales Rep Selection -->
            <div class="form-group">
                <label class="form-label" for="salesRep">Sales Representative</label>
                <select id="salesRep" class="form-select" required>
                    <option value="">Select a sales rep...</option>
                    <option value="sales@nwcustomapparel.com" selected>General Sales</option>
                    <option value="taylar@nwcustomapparel.com">Taylar</option>
                    <option value="nika@nwcustomapparel.com">Nika</option>
                    <option value="erik@nwcustomapparel.com">Erik</option>
                    <option value="adriyella@nwcustomapparel.com">Adriyella</option>
                </select>
            </div>

            <form id="quoteForm">
                <div class="form-group">
                    <label class="form-label" for="quoteCustomerName">Customer Name</label>
                    <input type="text" id="quoteCustomerName" class="form-input" required>
                </div>

                <div class="form-group">
                    <label class="form-label" for="customerEmail">Customer Email</label>
                    <input type="email" id="customerEmail" class="form-input" required placeholder="customer@example.com">
                </div>

                <div class="form-group">
                    <label class="form-label" for="customerPhone">Phone Number (optional)</label>
                    <input type="tel" id="customerPhone" class="form-input" placeholder="(555) 123-4567">
                </div>

                <div class="form-group">
                    <label class="form-label" for="companyName">Company Name (optional)</label>
                    <input type="text" id="companyName" class="form-input">
                </div>

                <div class="form-group">
                    <label class="form-label" for="notes">Notes (optional)</label>
                    <textarea id="notes" class="form-input" rows="3" placeholder="Any special instructions or notes..."></textarea>
                </div>


                <div id="quotePreview" class="quote-summary">
                    <!-- Quote preview will be shown here -->
                </div>

                <button type="submit" class="btn btn-success btn-fullwidth">
                    <i class="fas fa-paper-plane"></i>
                    Send Quote
                </button>
            </form>

            <div id="successMessage" class="success-message hidden">
                <i class="fas fa-check-circle"></i>
                <span>Quote sent successfully!</span>
                <span id="quoteIdDisplay" style="display: block; font-weight: bold; margin-top: 0.5rem;"></span>
            </div>

            <div id="errorMessage" class="error-message hidden">
                <i class="fas fa-exclamation-circle"></i>
                <span id="errorText">An error occurred. Please try again.</span>
            </div>
        </div>
    </div>


    <script>
        // Initialize calculator when DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            window.richardsonCalculator = new RichardsonCalculator();
            
            // Compact Showcase Image Click Handler
            const stripThumbs = document.querySelectorAll('.strip-thumb');
            stripThumbs.forEach(img => {
                img.addEventListener('click', function() {
                    // Open image in new tab for larger view
                    window.open(this.src, '_blank');
                });
            });
            
            // Setup Fees Accordion Toggle
            const setupToggle = document.getElementById('setupFeesToggle');
            const setupContent = document.getElementById('setupFeesContent');
            
            if (setupToggle && setupContent) {
                setupToggle.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Toggle active classes
                    this.classList.toggle('active');
                    setupContent.classList.toggle('active');
                    
                    // Update aria-expanded for accessibility
                    const isExpanded = this.classList.contains('active');
                    this.setAttribute('aria-expanded', isExpanded);
                });
                
                // Handle graphic design custom amount field
                const graphicDesignFee = document.getElementById('graphicDesignFee');
                const graphicDesignCustom = document.getElementById('graphicDesignCustom');
                
                if (graphicDesignFee && graphicDesignCustom) {
                    graphicDesignFee.addEventListener('change', function() {
                        if (this.value === 'custom') {
                            graphicDesignCustom.style.display = 'block';
                        } else {
                            graphicDesignCustom.style.display = 'none';
                            graphicDesignCustom.value = '';
                        }
                    });
                }
            }
        });
    </script>
</body>
</html>