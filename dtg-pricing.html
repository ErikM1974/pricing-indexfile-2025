<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DTG Pricing | NWCA</title>
    <link rel="stylesheet" href="/pricing-pages.css">
</head>
<body>
    <div class="container">
        <h1>Direct-to-Garment (DTG) Printing Pricing</h1>
        
        <!-- Product Context Area -->
        <div class="product-context">
            <img id="product-image" src="" alt="Product Image" class="product-image">
            <div class="product-details">
                <h3 id="product-title">Loading Product...</h3>
                <p>Style: <span id="product-style">Loading...</span></p>
                <p>Color: <span id="product-color">Loading...</span></p>
            </div>
            <a id="back-to-product" href="#" class="back-to-product">Back to Product</a>
        </div>
        
        <!-- Tab Navigation -->
        <div class="pricing-tabs">
            <a href="#" class="pricing-tab" data-page="embroidery">Embroidery</a>
            <a href="#" class="pricing-tab" data-page="cap-embroidery">Cap Embroidery</a>
            <a href="#" class="pricing-tab active" data-page="dtg">DTG</a>
            <a href="#" class="pricing-tab" data-page="screen-print">Screen Print</a>
            <a href="#" class="pricing-tab" data-page="dtf">DTF</a>
        </div>
        
        <!-- Pricing Content -->
        <div class="pricing-content">
            <div class="pricing-info">
                <h2>DTG Printing Pricing</h2>
                <p>Our Direct-to-Garment (DTG) printing offers full-color, photorealistic prints with no minimum order quantity. Perfect for complex designs, photographs, and small runs.</p>
            </div>
            
            <div id="pricing-calculator" class="pricing-calculator">
                <div class="loading-message">Loading pricing data...</div>
            </div>
            
            <div class="additional-info">
                <h3>About Our DTG Printing</h3>
                <p>Direct-to-Garment printing uses specialized inkjet technology to print designs directly onto garments. This method allows for incredible detail, smooth color gradients, and photorealistic images. DTG is ideal for small orders and complex, multi-colored designs.</p>
                
                <h3>DTG Printing FAQs</h3>
                <div class="faq-item">
                    <h4>What is the maximum print size for DTG?</h4>
                    <p>Our standard DTG print area is up to 14" x 16" for most garments. Larger prints may be available for certain items.</p>
                </div>
                <div class="faq-item">
                    <h4>Does DTG work better on certain garment colors?</h4>
                    <p>DTG prints best on white and light-colored garments. For dark garments, we use a white underbase layer which may add to the cost and slightly affect the hand feel.</p>
                </div>
                <div class="faq-item">
                    <h4>What file formats do you accept for DTG printing?</h4>
                    <p>For best results, we recommend high-resolution PNG files (300 dpi) with transparent backgrounds. We also accept JPG, PDF, AI, and PSD files.</p>
                </div>
                <div class="faq-item">
                    <h4>How durable are DTG prints?</h4>
                    <p>With proper care, DTG prints are quite durable. We recommend washing garments inside-out in cold water and air drying or using low heat to maximize print life.</p>
                </div>
            </div>
        </div>
    </div>
    
    <script src="/pricing-pages.js"></script>
    <script src="/pricing-matrix-capture.js"></script>
    <script src="/pricing-matrix-api.js"></script>
    <script src="/cart.js"></script>
    <script src="/cart-integration.js"></script>
    <script src="/cart-price-recalculator.js"></script>
    <script src="/add-to-cart.js"></script>
    
    <!-- Script to fix loading message issue -->
    <script>
        (function() {
            console.log("Loading message fix script initialized");
            
            // Function to hide the loading message
            function hideLoadingMessage() {
                const loadingMessages = document.querySelectorAll('.loading-message');
                loadingMessages.forEach(function(msg) {
                    console.log('Hiding loading message:', msg);
                    msg.style.display = 'none';
                });
            }
            
            // Function to check if Caspio table is loaded
            function checkCaspioTableLoaded() {
                // Check for various indicators that Caspio content has loaded
                const hasCaspioTable = !!document.querySelector('.matrix-price-table') ||
                                      !!document.querySelector('.cbResultSetTable') ||
                                      !!document.querySelector('#matrix-price-body') ||
                                      !!document.querySelector('.cbResultSet') ||
                                      !!document.querySelector('iframe[src*="caspio"]');
                
                if (hasCaspioTable) {
                    console.log('Caspio table detected, hiding loading messages');
                    hideLoadingMessage();
                    return true;
                }
                return false;
            }
            
            // Set up a MutationObserver to detect when Caspio content is added
            const observer = new MutationObserver(function(mutations) {
                if (checkCaspioTableLoaded()) {
                    // If we found the table, disconnect the observer
                    observer.disconnect();
                }
            });
            
            // Start observing the document with the configured parameters
            observer.observe(document.body, { childList: true, subtree: true });
            
            // Also check immediately in case the table is already loaded
            checkCaspioTableLoaded();
            
            // Set up periodic checks to ensure loading message is hidden
            const checkIntervals = [1000, 2000, 3000, 5000, 8000, 10000];
            checkIntervals.forEach(interval => {
                setTimeout(() => {
                    if (document.querySelector('.loading-message')) {
                        console.log(`Checking for Caspio table after ${interval}ms`);
                        if (checkCaspioTableLoaded()) {
                            console.log(`Found Caspio table after ${interval}ms`);
                        } else if (interval >= 5000) {
                            // If we still have loading messages but no table after 5+ seconds,
                            // hide them anyway as a fallback
                            console.log(`No Caspio table found after ${interval}ms, hiding loading messages anyway`);
                            hideLoadingMessage();
                        }
                    }
                }, interval);
            });
            
            // Add CSS to hide loading messages when Caspio content is present
            const styleEl = document.createElement('style');
            styleEl.textContent = `
                /* Hide loading messages when Caspio content is present */
                .matrix-price-table ~ .loading-message,
                .cbResultSetTable ~ .loading-message,
                #matrix-price-body ~ .loading-message,
                .cbResultSet ~ .loading-message,
                iframe[src*="caspio"] ~ .loading-message,
                .loading-message:has(+ .matrix-price-table),
                .loading-message:has(+ .cbResultSetTable),
                .loading-message:has(+ #matrix-price-body),
                .loading-message:has(+ .cbResultSet),
                .loading-message:has(+ iframe[src*="caspio"]) {
                    display: none !important;
                }
                
                /* Hide loading message when pricing calculator has other content */
                #pricing-calculator:has(table) .loading-message,
                #pricing-calculator:has(iframe) .loading-message,
                #pricing-calculator:has(.matrix-price-table) .loading-message,
                #pricing-calculator:has(.cbResultSetTable) .loading-message,
                #pricing-calculator:has(#matrix-price-body) .loading-message,
                #pricing-calculator:has(.cbResultSet) .loading-message {
                    display: none !important;
                }
            `;
            document.head.appendChild(styleEl);
            
            // Simple final cleanup that only targets loading messages
            setTimeout(function() {
                console.log('Final targeted cleanup - only hiding .loading-message elements');
                // Only hide elements with the specific loading-message class
                const loadingMessages = document.querySelectorAll('.loading-message');
                loadingMessages.forEach(function(msg) {
                    console.log('Final cleanup hiding loading message:', msg);
                    msg.style.display = 'none';
                });
            }, 8000);
        })();
    </script>
</body>
</html>