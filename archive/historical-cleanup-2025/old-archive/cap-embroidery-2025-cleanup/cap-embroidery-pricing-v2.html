<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cap Embroidery Pricing | Northwest Custom Apparel</title>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Universal Pricing CSS -->
    <link rel="stylesheet" href="/shared_components/css/universal-pricing-header.css">
    <link rel="stylesheet" href="/shared_components/css/universal-pricing-layout.css">
    <link rel="stylesheet" href="/shared_components/css/universal-calculator-theme.css">
    <link rel="stylesheet" href="/shared_components/css/universal-pricing-components.css">
    
    <!-- Legacy styles for compatibility -->
    <link rel="stylesheet" href="/shared_components/css/shared-pricing-styles.css">
    <link rel="stylesheet" href="/shared_components/css/modern-enhancements.css">
    <link rel="stylesheet" href="/shared_components/css/universal-image-gallery.css">
    <link rel="stylesheet" href="/shared_components/css/universal-product-display.css">
    <link rel="stylesheet" href="/shared_components/css/universal-quick-quote.css">
    <link rel="stylesheet" href="/shared_components/css/universal-pricing-grid.css">
    <link rel="stylesheet" href="/shared_components/css/enhanced-loading-animations.css">
    <link rel="stylesheet" href="/shared_components/css/embroidery-customization-cool.css">
    
    <style>
        /* Override blue theme with green */
        :root {
            --primary: #3a7c52 !important;
            --primary-dark: #2d5f3f !important;
            --primary-color: #3a7c52 !important;
            --primary-light: #e8f5e9 !important;
        }
        
        /* Page-specific overrides */
        body {
            background-color: #f5f5f5;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
            margin: 0;
        }
        
        /* Cap-specific styles */
        .cap-preview-container {
            background: white;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .cap-preview-image {
            max-width: 100%;
            height: auto;
            border-radius: 4px;
        }
        
        /* Keep existing functional classes */
        .hero-section,
        .product-header,
        .product-info,
        .pricing-section,
        .cap-pricing-container {
            /* Preserve existing functionality */
        }
        
        /* Stitch slider styles */
        .customization-section {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .section-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
        }
        
        .stitch-control {
            margin-bottom: 20px;
        }
        
        .stitch-control label {
            display: block;
            margin-bottom: 10px;
            font-weight: 500;
        }
        
        .stitch-slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }
        
        .stitch-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3a7c52;
            cursor: pointer;
        }
        
        .stitch-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3a7c52;
            cursor: pointer;
        }
        
        .slider-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }
        
        .back-logo-section {
            border-top: 1px solid #eee;
            padding-top: 20px;
            margin-top: 20px;
        }
        
        .back-logo-price {
            font-size: 16px;
            color: #3a7c52;
            font-weight: 600;
            margin-top: 10px;
        }
        
        /* Quick quote styles */
        .universal-quick-quote {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .quote-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 20px;
            color: #333;
        }
        
        .quote-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        .quantity-input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        
        .quote-breakdown {
            border-top: 1px solid #eee;
            padding-top: 15px;
        }
        
        .quote-line {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 16px;
        }
        
        .quote-line.subtotal {
            padding-top: 10px;
            border-top: 1px solid #eee;
        }
        
        .quote-line.total {
            font-size: 20px;
            font-weight: 600;
            color: #3a7c52;
            padding-top: 10px;
            border-top: 2px solid #333;
        }
        
        /* Pricing table styles */
        .universal-pricing-grid {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .grid-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
        }
        
        .table-wrapper {
            overflow-x: auto;
        }
        
        .pricing-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 10px;
        }
        
        .pricing-table th,
        .pricing-table td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #eee;
        }
        
        .pricing-table th {
            background-color: #f8f8f8;
            font-weight: 600;
            color: #333;
        }
        
        .tier-label {
            font-weight: 600;
            text-align: left;
        }
        
        .price-cell {
            font-size: 16px;
            color: #3a7c52;
            font-weight: 500;
        }
        
        .pricing-note {
            font-size: 14px;
            color: #666;
            text-align: center;
            margin: 0;
        }
        
        .pricing-error {
            text-align: center;
            padding: 40px;
            color: #666;
        }
        
        .pricing-error a {
            color: #3a7c52;
            text-decoration: none;
            font-weight: 600;
        }
    </style>
</head>
<body class="universal-theme">
    <!-- Universal Header -->
    <header class="universal-pricing-header">
        <!-- Contact Bar -->
        <div class="universal-header-contact-bar">
            <div class="universal-header-contact-content">
                <div class="universal-header-contact-left">
                    <a href="tel:253-922-5793" class="universal-header-contact-item">
                        <i class="fas fa-phone universal-header-contact-icon"></i>
                        253-922-5793
                    </a>
                    <a href="mailto:sales@nwcustomapparel.com" class="universal-header-contact-item">
                        <i class="fas fa-envelope universal-header-contact-icon"></i>
                        sales@nwcustomapparel.com
                    </a>
                    <span class="universal-header-contact-item">
                        <i class="fas fa-clock universal-header-contact-icon"></i>
                        9AM-5PM
                    </span>
                </div>
            </div>
        </div>
        
        <!-- Main Header -->
        <div class="universal-header-main">
            <div class="universal-header-main-content">
                <!-- Logo -->
                <a href="/" class="universal-header-logo">
                    <div class="universal-header-logo-text">
                        <h1 class="universal-header-company-name">NW NORTHWEST</h1>
                        <p class="universal-header-tagline">CUSTOM APPAREL</p>
                    </div>
                </a>
                
                <!-- Navigation -->
                <nav class="universal-header-nav">
                    <a href="/" class="universal-header-nav-link">Home</a>
                    <a href="/products" class="universal-header-nav-link">Products</a>
                    <a href="/cap-embroidery-pricing" class="universal-header-nav-link active">Cap Embroidery</a>
                </nav>
                
                <!-- CTA Buttons -->
                <div class="universal-header-cta-group">
                    <a href="#" class="universal-header-btn universal-header-btn-secondary">
                        <i class="fas fa-arrow-left"></i>
                        Back to Products
                    </a>
                    <a href="#" class="universal-header-btn universal-header-btn-primary">
                        Get Quote
                    </a>
                </div>
            </div>
        </div>
    </header>
    
    <!-- Page Title -->
    <div class="universal-pricing-page-title">
        <div class="universal-page-title-content">
            <h1 class="universal-page-title">Cap Embroidery Pricing</h1>
            <p class="universal-page-subtitle">Professional embroidery for caps, hats, and headwear</p>
        </div>
    </div>

    <!-- Main Content -->
    <div class="universal-pricing-container">
        <div class="universal-pricing-columns">
            <!-- Left Column: Product Display -->
            <div class="universal-product-column">
                <div class="universal-product-card">
                    <!-- Product Header -->
                    <div class="universal-product-header">
                        <a href="#" class="universal-product-back-link">
                            <i class="fas fa-arrow-left"></i>
                            Back to Products
                        </a>
                        <h2 class="universal-product-name" id="product-name">Select a Cap Style</h2>
                        <p class="universal-product-style" id="product-style">Choose from our catalog</p>
                    </div>
                    
                    <!-- Cap Preview -->
                    <div class="cap-preview-container">
                        <div id="product-images-container" class="product-images-container">
                            <img src="/assets/images/cap-placeholder.jpg" alt="Cap" class="cap-preview-image">
                        </div>
                    </div>
                    
                    <!-- Color Selection -->
                    <div class="universal-product-colors">
                        <h3 class="universal-colors-title">Available Colors</h3>
                        <div id="color-swatches-container" class="color-swatches-grid">
                            <!-- Colors will be populated here -->
                        </div>
                    </div>
                    
                    <!-- Info Box -->
                    <div class="universal-info-box">
                        <p class="universal-info-text">
                            <i class="fas fa-info-circle universal-info-icon"></i>
                            Cap embroidery includes up to 10,000 stitches. Additional charges apply for complex designs.
                        </p>
                    </div>
                </div>
            </div>
            
            <!-- Right Column: Calculator -->
            <div class="universal-calculator-column">
                <div class="universal-calculator-card">
                    <!-- Cap Selection (if needed) -->
                    <div id="cap-selection-container" class="cap-selection-section">
                        <!-- Cap selection UI -->
                    </div>
                    
                    <!-- Quick Quote Calculator -->
                    <div id="quick-quote-container"></div>
                    
                    <!-- Pricing Grid -->
                    <div id="pricing-grid-container"></div>
                    
                    <!-- Customization Options -->
                    <div id="embroidery-customization-container" class="embroidery-customization-section"></div>
                    
                    <!-- Call to Action -->
                    <div class="universal-action-buttons">
                        <button class="universal-action-btn universal-action-primary" onclick="window.location.href='tel:253-922-5793'">
                            <i class="fas fa-phone"></i>
                            Call for Quote
                        </button>
                        <button class="universal-action-btn universal-action-secondary" onclick="window.location.href='mailto:sales@nwcustomapparel.com?subject=Cap Embroidery Quote'">
                            <i class="fas fa-envelope"></i>
                            Email Quote
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Hidden containers for compatibility -->
    <div id="pricing-calculator" style="display:none !important; position: absolute; left: -9999px;">
        <!-- Legacy Caspio removed - now using new data engine -->
    </div>
    
    <!-- New Caspio Data Engine Container -->
    <div id="caspio-dp-container" style="display: none;"></div>
    
    <!-- Legacy containers -->
    <div class="hero-section" style="display: none;">
        <div class="container">
            <div class="product-header"></div>
        </div>
    </div>
    
    <div class="pricing-section" style="display: none;">
        <div class="container">
            <div class="cap-pricing-container"></div>
        </div>
    </div>
    
    <!-- Scripts -->
    <!-- Core utilities and constants -->
    <script src="/shared_components/js/utils.js"></script>
    <script src="/shared_components/js/constants.js"></script>
    
    <!-- Visual components -->
    <script src="/shared_components/js/universal-header-component.js"></script>
    <script src="/shared_components/js/universal-image-gallery.js"></script>
    <script src="/shared_components/js/universal-product-display.js"></script>
    
    <!-- New simplified pricing implementation -->
    <script src="/shared_components/js/cap-embroidery-pricing-simple.js"></script>
    
    <script>
        // Set API URL globally
        window.API_PROXY_BASE_URL = 'https://caspio-pricing-proxy-ab30a049961a.herokuapp.com';
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('[CapEmbroideryV2] Page loaded');
            
            // Initialize header if available
            if (window.UniversalHeader) {
                window.UniversalHeader.init();
            }
        });
    </script>
</body>
</html>